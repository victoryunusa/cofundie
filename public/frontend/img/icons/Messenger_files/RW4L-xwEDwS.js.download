if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("LSHandleWrongRecoveryCode",["LSAppendDataTraceAddon","LSFlushDataTrace.nop","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(d){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure]Beginning execution."),a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],[0,1415],[0,2],a[1],f):c.resolve()},function(a){return d[0]=!1,d[0]?d[1]=!0:d[1]=!1,d[1]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[2]=c.createArray(),f!==f?d[3]=(d[2].push(f),d[2]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[2],[0,3])):c.resolve()},function(a){return c.db.table(178).put({pk:[0,1],recoveryCodeStatus:[0,3]})},function(e){return a[2]?c.seq([function(e){return a[2]?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],[0,84],[0,2],f,f):c.resolve()},function(a){return d[4]=!1,d[4]?d[5]=!0:d[5]=!1,d[5]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[6]=c.createArray(),f!==f?d[7]=(d[6].push(f),d[6]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[6],[0,3])):c.resolve()}]):a[0]!==f?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],[0,85],[0,2],"The flow did not succeed",f):c.resolve()},function(a){return d[4]=!1,d[4]?d[5]=!0:d[5]=!1,d[5]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[6]=c.createArray(),f!==f?d[7]=(d[6].push(f),d[6]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[6],[0,3])):c.resolve()}]):c.resolve()},function(d){return a[0]!==f?c.nop(b("LSFlushDataTrace.nop"),a[0]):c.resolve()},function(a){return d[2]=!1,d[2]?d[3]=!0:d[3]=!1,d[3]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[4]=c.createArray(),f!==f?d[5]=(d[4].push(f),d[4]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[4],[0,3])):c.resolve()}]):a[1]!==f?c.seq([function(e){return d[5]=["[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure]","",a[1]].join(""),function(a){c.logger(a).mustfix(a)}(d[5]),d[2]=c.createArray(),a[0]!==f?d[6]=(d[2].push(a[0]),d[2]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure",a[1],d[2],[0,3])},function(e){return a[0]!==f?c.seq([function(e){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],[0,85],[0,2],d[5],f):c.resolve()},function(a){return d[6]=!1,d[6]?d[7]=!0:d[7]=!1,d[7]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[8]=c.createArray(),f!==f?d[9]=(d[8].push(f),d[8]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[8],[0,3])):c.resolve()}]):c.resolve()},function(d){return a[0]!==f?c.nop(b("LSFlushDataTrace.nop"),a[0]):c.resolve()},function(a){return d[3]=!1,d[3]?d[4]=!0:d[4]=!1,d[4]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[6]=c.createArray(),f!==f?d[7]=(d[6].push(f),d[6]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[6],[0,3])):c.resolve()}]):c.seq([function(e){return a[0]!==f?c.seq([function(d){return a[0]!==f?c.sp(b("LSAppendDataTraceAddon"),a[0],[0,85],[0,2],["[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure]","",""].join(""),f):c.resolve()},function(a){return d[4]=!1,d[4]?d[5]=!0:d[5]=!1,d[5]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[6]=c.createArray(),f!==f?d[7]=(d[6].push(f),d[6]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[6],[0,3])):c.resolve()}]):c.resolve()},function(d){return a[0]!==f?c.nop(b("LSFlushDataTrace.nop"),a[0]):c.resolve()},function(a){return d[2]=!1,d[2]?d[3]=!0:d[3]=!1,d[3]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[4]=c.createArray(),f!==f?d[5]=(d[4].push(f),d[4]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[4],[0,3])):c.resolve()}])},function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsHandleWrongRecoveryCodeStoredProcedure]Finishing execution.")}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAddDevice",["LSAppendDataTraceAddon","LSBase64Encode.nop","LSCreateDataTraceID.nop","LSFlushDataTrace.nop","LSGetViewerFBID","LSHandleWrongRecoveryCode","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop","LSParseRecoveryCode_v2.nop","qex"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(e){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]Beginning execution."),d[3]=function(a){return a==f?f:a}(b("qex")._("1222")),d[3]!==f?d[0]=d[3]:d[0]=!1,d[4]=function(a){return a==f?f:a}(b("qex")._("96")),d[4]!==f?d[1]=d[4]:d[1]=!1,d[0]||d[1]?c.seq([function(e){return c.i64.eq([0,1],[0,2])?d[5]=[0,199]:d[5]=[0,71],a[3]!==f?c.seq([function(b){return d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils]",d[11],"EncryptedBackups Trace ID",d[11],c.i64.to_string(d[5])].join("")),c.db.table(153).add({traceId:a[3],initTimestampMs:c.i64.of_float(Date.now()),traceType:d[5],shouldFlush:!1,contextThree:"backup_init_flow"})},function(b){return d[6]=a[3]}]):c.seq([function(a){return c.nop(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[12]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils]",d[12],"EncryptedBackups MCD Trace ID",d[12],c.i64.to_string(d[5])].join("")),c.db.table(153).add({traceId:d[11],initTimestampMs:c.i64.of_float(Date.now()),traceType:d[5],shouldFlush:!1,contextThree:"backup_init_flow"})},function(a){return d[13]=!1,d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),f!==f?d[16]=(d[15].push(f),d[15]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],[0,3])):c.resolve()},function(a){return d[6]=d[11]}])},function(a){return d[6]!==f?c.sp(b("LSAppendDataTraceAddon"),d[6],[0,1413],[0,2],f,f):c.resolve()},function(a){return d[7]=!1,d[7]?d[8]=!0:d[8]=!1,d[8]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],[0,3])):c.resolve()},function(e){return c.db.table(179).fetch().next().then(function(e,h){h=e.done;e=e.value;return h?c.seq([function(b){return d[11]=c.createArray(),c.fe(c.ftr(c.db.table(184).fetch(),function(b){return c.i64.eq(b.backupId,a[0])}),function(a){a=a.item;return d[15]=new c.Map(),d[15].set("virtual_device_id",a.virtualDeviceId),d[16]=(d[11].push(d[15]),d[11])})},function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[12]=a[0],a})},function(e){return c.nop(b("LSParseRecoveryCode_v2.nop"),a[1],c.i64.to_string(d[12]),d[11]).then(function(a){return a=a,d[13]=a[0],d[14]=a[1],a})},function(e){return c.blobs.neq(d[13],f)?c.blobs.neq(d[14],f)?c.seq([function(a){return c.nop(b("LSBase64Encode.nop"),d[13]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.db.table(178).put({pk:[0,1],recoveryCodeStatus:[0,1]})},function(e){return d[16]=new c.Map(),d[16].set("backup_id",a[0]),d[16].set("virtual_device_id",d[15]==null?"":d[15]),d[16].set("trace_id",d[6]),c.i64.gt([0,0],[0,0])?d[17]=c.i64.add(c.i64.of_float(Date.now()),[0,0]):d[17]=[0,0],d[18]=c.toJSON(d[16]),c.sp(b("LSIssueNewTaskAndGetTaskID"),"encrypted_backups_setup",[0,50007],d[18],f,f,[0,0],[0,0],f,f,d[17]).then(function(a){return a=a,d[19]=a[0],a})},function(b){return c.db.table(185).add({pk:[0,1],backupId:a[0],deviceRegistrationId:a[2],taskId:d[19]})},function(a){return c.db.table(179).add({taskId:d[19],virtualDeviceId:d[13],blobDecryptionKey:d[14]})}]):c.sp(b("LSHandleWrongRecoveryCode"),d[6],"[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]Wrong recovery code. blob_decryption_key is null",!0):c.seq([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]Wrong recovery code"),d[15]=c.createArray(),f!==f?d[16]=(d[15].push(f),d[15]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsAddDeviceStoredProcedure","Wrong recovery code",d[15],[0,3])},function(a){return c.sp(b("LSHandleWrongRecoveryCode"),d[6],"[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]Wrong recovery code. virtual_device_id is null",!0)}])},function(a){return d[9]=[0,0]}]):(e.item,c.seq([function(a){return d[11]="Aborting addDevice execution as there is an existing pending task",d[11]!==f?c.seq([function(a){return d[15]=["[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]","",d[11]].join(""),function(a){c.logger(a).mustfix(a)}(d[15]),d[12]=c.createArray(),d[6]!==f?d[16]=(d[12].push(d[6]),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsAddDeviceStoredProcedure",d[11],d[12],[0,3])},function(a){return d[6]!==f?c.seq([function(a){return d[6]!==f?c.sp(b("LSAppendDataTraceAddon"),d[6],[0,85],[0,2],d[15],f):c.resolve()},function(a){return d[16]=!1,d[16]?d[17]=!0:d[17]=!1,d[17]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[18]=c.createArray(),f!==f?d[19]=(d[18].push(f),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[18],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[6]!==f?c.nop(b("LSFlushDataTrace.nop"),d[6]):c.resolve()},function(a){return d[13]=!1,d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),f!==f?d[17]=(d[16].push(f),d[16]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],[0,3])):c.resolve()}]):c.seq([function(a){return d[6]!==f?c.seq([function(a){return d[6]!==f?c.sp(b("LSAppendDataTraceAddon"),d[6],[0,85],[0,2],["[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]","",""].join(""),f):c.resolve()},function(a){return d[14]=!1,d[14]?d[15]=!0:d[15]=!1,d[15]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),f!==f?d[17]=(d[16].push(f),d[16]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[6]!==f?c.nop(b("LSFlushDataTrace.nop"),d[6]):c.resolve()},function(a){return d[12]=!1,d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),f!==f?d[15]=(d[14].push(f),d[14]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],[0,3])):c.resolve()}])},function(a){return d[9]=[0,1]}]))})},function(a){return d[2]=d[9]}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]addDeviceFlow is not enabled"),d[2]=[0,1]))},function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsAddDeviceStoredProcedure]Finishing execution."),e[0]=d[2]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSFetchBackupsMetadata",["LSAppendDataTraceAddon","LSCreateDataTraceID.nop","LSFlushDataTrace.nop","LSIssueNewTask","LSLogMebClientEvent.nop","qex"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure]Beginning execution."),d[2]=function(a){return a==f?f:a}(b("qex")._("1230")),d[2]!==f?d[0]=d[2]:d[0]=!0,d[3]=function(a){return a==f?f:a}(b("qex")._("741")),d[3]!==f?d[1]=d[3]:d[1]=!0,d[0]||d[1]?c.seq([function(e){return a[0]!==f?c.resolve(d[4]=a[0]):c.seq([function(a){return c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,[0,80])&&c.i64.eq(a.backupTenancy,[0,2])}),0,c.i64.to_float([0,1])).next().then(function(a,b){b=a.done;a=a.value;return b?d[9]=!1:(a.item,d[9]=!0)})},function(a){return d[9]?d[11]=c.i64.or_([0,86],[0,128]):d[11]=[0,86],c.nop(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[13]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils]",d[13],"EncryptedBackups MCD Trace ID",d[13],c.i64.to_string(d[11])].join("")),c.db.table(153).add({traceId:d[12],initTimestampMs:c.i64.of_float(Date.now()),traceType:d[11],shouldFlush:!1,contextThree:"backup_metadata"})},function(a){return d[14]=!1,d[14]?d[15]=!0:d[15]=!1,d[15]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),f!==f?d[17]=(d[16].push(f),d[16]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],[0,3])):c.resolve()},function(a){return d[4]=d[12]}])},function(a){return d[4]!==f?c.sp(b("LSAppendDataTraceAddon"),d[4],[0,1478],[0,2],f,f):c.resolve()},function(a){return d[5]=!1,d[5]?d[6]=!0:d[6]=!1,d[6]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[9]=c.createArray(),f!==f?d[10]=(d[9].push(f),d[9]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[9],[0,3])):c.resolve()},function(a){return c.fe(c.db.table(196).fetch(),function(a){return a["delete"]()})},function(a){return c.db.table(172).fetch([[[[0,1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[7]=f:(b=a.item,d[7]=b.backupId)})},function(a){return c.i64.neq(d[7],f)?c.seq([function(a){return c.fe(c.ftr(c.db.table(196).fetch([[[d[7]]]]),function(a){return c.i64.eq(a.backupId,d[7])&&c.i64.lt(a.authorityLevel,[0,20])}),function(a){return a["delete"]()})},function(a){return c.db.table(196).add({backupId:d[7],authorityLevel:[0,20],backupSize:[0,0],creationTime:[0,0],lastSyncTime:[0,0]})},function(a){return d[9]=new c.Map(),d[9].set("trace_id",d[4]),d[10]=c.toJSON(d[9]),c.sp(b("LSIssueNewTask"),"encrypted_backups_setup",[0,50022],d[10],f,f,[0,0],[0,0],f,f,[0,0])}]):c.seq([function(a){return d[9]="Backup is not initialized",d[9]!==f?c.seq([function(a){return d[13]=["[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure]","",d[9]].join(""),function(a){c.logger(a).mustfix(a)}(d[13]),d[10]=c.createArray(),d[4]!==f?d[14]=(d[10].push(d[4]),d[10]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFetchBackupsMetadataStoredProcedure",d[9],d[10],[0,3])},function(a){return d[4]!==f?c.seq([function(a){return d[4]!==f?c.sp(b("LSAppendDataTraceAddon"),d[4],[0,85],[0,2],d[13],f):c.resolve()},function(a){return d[14]=!1,d[14]?d[15]=!0:d[15]=!1,d[15]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[16]=c.createArray(),f!==f?d[17]=(d[16].push(f),d[16]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[16],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[4]!==f?c.nop(b("LSFlushDataTrace.nop"),d[4]):c.resolve()},function(a){return d[11]=!1,d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),f!==f?d[15]=(d[14].push(f),d[14]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],[0,3])):c.resolve()}]):c.seq([function(a){return d[4]!==f?c.seq([function(a){return d[4]!==f?c.sp(b("LSAppendDataTraceAddon"),d[4],[0,85],[0,2],["[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure]","",""].join(""),f):c.resolve()},function(a){return d[12]=!1,d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[14]=c.createArray(),f!==f?d[15]=(d[14].push(f),d[14]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[14],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[4]!==f?c.nop(b("LSFlushDataTrace.nop"),d[4]):c.resolve()},function(a){return d[10]=!1,d[10]?d[11]=!0:d[11]=!1,d[11]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[12]=c.createArray(),f!==f?d[13]=(d[12].push(f),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[12],[0,3])):c.resolve()}])},function(a){return c.fe(c.db.table(196).fetch(),function(a){return a["delete"]()})},function(a){return c.fe(c.ftr(c.db.table(196).fetch([[[[-1,4294967295]]]]),function(a){return c.i64.eq(a.backupId,[-1,4294967295])&&c.i64.lt(a.authorityLevel,[0,80])}),function(a){return a["delete"]()})},function(a){return c.db.table(196).add({backupId:[-1,4294967295],authorityLevel:[0,80],backupSize:[-1,4294967295],creationTime:[-1,4294967295],lastSyncTime:[-1,4294967295]})}])}]):c.resolve(function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure]is_backup_metadata_enabled is disabled"))},function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFetchBackupsMetadataStoredProcedure]Finishing execution.")}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSInitializeRestore",["LSAppendDataTraceAddon","LSBase64Encode.nop","LSCreateDataTraceID.nop","LSFlushDataTrace.nop","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIssueNewTaskAndGetTaskID","LSLogMebClientEvent.nop","LSOcmfClientMap.nop","LSSerializeThreadListKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(a){return c.seq([function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsInitializeRestoreStoredProcedure]Beginning execution."),c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,[0,80])}),0,c.i64.to_float([0,1])).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[f,f,f,f,f,[0,1]],d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],d[4]=e[4],d[5]=e[5],e):(b=a.item,d[18]=b.backupTenancy,c.i64.neq(d[18],f)?d[17]=d[18]:d[17]=[0,1],e=[b.backupId,b.deviceId,b.mailboxRootKeyBlob,b.ocmfClientStateBlob,b.encryptionVersion,d[17]],d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],d[4]=e[4],d[5]=e[5],e)})},function(a){return c.islc(c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,[0,80])&&c.i64.eq(a.backupTenancy,[0,2])}),0,c.i64.to_float([0,1])).next().then(function(a,b){b=a.done;a=a.value;return b?d[7]=!1:(a.item,d[7]=!0)})},function(a){return d[7]?d[9]=c.i64.or_([0,73],[0,128]):d[9]=[0,73],c.nop(b("LSCreateDataTraceID.nop")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils]",d[11],"EncryptedBackups MCD Trace ID",d[11],c.i64.to_string(d[9])].join("")),c.db.table(153).add({traceId:d[10],initTimestampMs:c.i64.of_float(Date.now()),traceType:d[9],shouldFlush:!1,contextThree:"restore_threads"})},function(a){return d[12]=!1,d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),f!==f?d[18]=(d[17].push(f),d[17]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],[0,3])):c.resolve()},function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,1418],[0,2],f,f):c.resolve()},function(a){return d[14]=!1,d[14]?d[15]=!0:d[15]=!1,d[15]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),f!==f?d[18]=(d[17].push(f),d[17]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],[0,3])):c.resolve()},function(a){return c.i64.neq(d[0],f)?c.seq([function(a){return c.blobs.neq(d[3],f)?c.seq([function(a){return c.sp(b("LSSerializeThreadListKey"),"0",c.i64.to_string(d[0]),"AdvancedCrypto").then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.nop(b("LSGetBlobFromString.nop"),c.i64.to_string(d[0])).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nop(b("LSHmac_v2.nop"),c.blob("bWFpbGJveF9pZF9zY29wZQ=="),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return c.nop(b("LSOcmfClientMap.nop"),d[3],d[20]).then(function(a){return a=a,d[21]=a[0],a})},function(a){return c.nop(b("LSBase64Encode.nop"),d[21]).then(function(a){return a=a,d[22]=a[0],a})},function(a){return c.nop(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.nop(b("LSHmac_v2.nop"),c.blob("dGhyZWFkX2lkX3Njb3Bl"),d[23]).then(function(a){return a=a,d[24]=a[0],a})},function(a){return c.nop(b("LSOcmfClientMap.nop"),d[3],d[24]).then(function(a){return a=a,d[25]=a[0],a})},function(a){return c.nop(b("LSBase64Encode.nop"),d[25]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return c.seq([function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueRestoreTaskStoredProcedure]Beginning execution."),c.i64.eq([0,2],[0,1])?d[28]="messages":d[28]="threads",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsIssueRestoreTaskStoredProcedure]","",["Restoring ",d[28]].join("")].join("")),!1===!0?c.seq([function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,2511],[0,2],f,f):c.resolve()},function(a){return d[37]=!1,d[37]?d[38]=!0:d[38]=!1,d[38]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[39]=c.createArray(),f!==f?d[40]=(d[39].push(f),d[39]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[39],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,3604],[0,2],f,f):c.resolve()},function(a){return d[29]=!1,d[29]?d[30]=!0:d[30]=!1,d[30]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[37]=c.createArray(),f!==f?d[38]=(d[37].push(f),d[37]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[37],[0,3])):c.resolve()},function(a){return c.i64.gt([0,0],[0,0])?d[31]=c.i64.add(c.i64.of_float(Date.now()),[0,0]):d[31]=[0,0],c.sp(b("LSIssueNewTaskAndGetTaskID"),"encrypted_backups_restore",[0,50015],"",f,f,[0,0],[0,0],f,f,d[31]).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,3601],[0,2],f,f):c.resolve()},function(a){return d[33]=!1,d[33]?d[34]=!0:d[34]=!1,d[34]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[37]=c.createArray(),f!==f?d[38]=(d[37].push(f),d[37]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[37],[0,3])):c.resolve()},function(a){return c.db.table(190).add({taskId:d[32],mailboxPartialId:d[22]==null?"":d[22],listId:d[26]==null?"":d[26],numItems:[0,100],contentType:[0,2],traceId:d[10],isPointQuery:!1,newerNumItems:[0,0]})},function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,3605],[0,2],f,f):c.resolve()},function(a){return d[35]=!1,d[35]?d[36]=!0:d[36]=!1,d[36]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[37]=c.createArray(),f!==f?d[38]=(d[37].push(f),d[37]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[37],[0,3])):c.resolve()},function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueRestoreTaskStoredProcedure]Finishing execution."),d[27]=d[32]}])},function(a){return d[17]=[0,0]}]):c.seq([function(a){return d[18]="missing ocmf_client_state for restore",d[18]!==f?c.seq([function(a){return d[22]=["[EncryptedBackups][LSEncryptedBackupsInitializeRestoreStoredProcedure]","",d[18]].join(""),function(a){c.logger(a).mustfix(a)}(d[22]),d[19]=c.createArray(),d[10]!==f?d[23]=(d[19].push(d[10]),d[19]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsInitializeRestoreStoredProcedure",d[18],d[19],[0,3])},function(a){return d[10]!==f?c.seq([function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,85],[0,2],d[22],f):c.resolve()},function(a){return d[23]=!1,d[23]?d[24]=!0:d[24]=!1,d[24]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[25]=c.createArray(),f!==f?d[26]=(d[25].push(f),d[25]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[25],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[10]!==f?c.nop(b("LSFlushDataTrace.nop"),d[10]):c.resolve()},function(a){return d[20]=!1,d[20]?d[21]=!0:d[21]=!1,d[21]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[23]=c.createArray(),f!==f?d[24]=(d[23].push(f),d[23]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[23],[0,3])):c.resolve()}]):c.seq([function(a){return d[10]!==f?c.seq([function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,85],[0,2],["[EncryptedBackups][LSEncryptedBackupsInitializeRestoreStoredProcedure]","",""].join(""),f):c.resolve()},function(a){return d[21]=!1,d[21]?d[22]=!0:d[22]=!1,d[22]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[23]=c.createArray(),f!==f?d[24]=(d[23].push(f),d[23]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[23],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[10]!==f?c.nop(b("LSFlushDataTrace.nop"),d[10]):c.resolve()},function(a){return d[19]=!1,d[19]?d[20]=!0:d[20]=!1,d[20]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[21]=c.createArray(),f!==f?d[22]=(d[21].push(f),d[21]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[21],[0,3])):c.resolve()}])},function(a){return d[17]=[0,1]}])},function(a){return d[16]=d[17]}]):c.seq([function(a){return d[17]="missing backup_id for restore",d[17]!==f?c.seq([function(a){return d[21]=["[EncryptedBackups][LSEncryptedBackupsInitializeRestoreStoredProcedure]","",d[17]].join(""),function(a){c.logger(a).mustfix(a)}(d[21]),d[18]=c.createArray(),d[10]!==f?d[22]=(d[18].push(d[10]),d[18]):0,c.nop(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsInitializeRestoreStoredProcedure",d[17],d[18],[0,3])},function(a){return d[10]!==f?c.seq([function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,85],[0,2],d[21],f):c.resolve()},function(a){return d[22]=!1,d[22]?d[23]=!0:d[23]=!1,d[23]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[24]=c.createArray(),f!==f?d[25]=(d[24].push(f),d[24]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[24],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[10]!==f?c.nop(b("LSFlushDataTrace.nop"),d[10]):c.resolve()},function(a){return d[19]=!1,d[19]?d[20]=!0:d[20]=!1,d[20]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),f!==f?d[23]=(d[22].push(f),d[22]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],[0,3])):c.resolve()}]):c.seq([function(a){return d[10]!==f?c.seq([function(a){return d[10]!==f?c.sp(b("LSAppendDataTraceAddon"),d[10],[0,85],[0,2],["[EncryptedBackups][LSEncryptedBackupsInitializeRestoreStoredProcedure]","",""].join(""),f):c.resolve()},function(a){return d[20]=!1,d[20]?d[21]=!0:d[21]=!1,d[21]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[22]=c.createArray(),f!==f?d[23]=(d[22].push(f),d[22]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[22],[0,3])):c.resolve()}]):c.resolve()},function(a){return d[10]!==f?c.nop(b("LSFlushDataTrace.nop"),d[10]):c.resolve()},function(a){return d[18]=!1,d[18]?d[19]=!0:d[19]=!1,d[19]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[20]=c.createArray(),f!==f?d[21]=(d[20].push(f),d[20]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[20],[0,3])):c.resolve()}])},function(a){return d[16]=[0,1]}])},function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsInitializeRestoreStoredProcedure]Finishing execution."),e[0]=d[16]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSProcessBackupIds",["LSAppendDataTraceAddon","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(g){return c.seq([function(b){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure]Beginning execution."),a[0]!==f?c.seq([function(b){return d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][MEBTraceUtils]",d[5],"EncryptedBackups Trace ID",d[5],c.i64.to_string([0,69])].join("")),c.db.table(153).add({traceId:a[0],initTimestampMs:c.i64.of_float(Date.now()),traceType:[0,69],shouldFlush:!1,contextThree:"fetch_backup_status"})},function(b){return d[0]=a[0]}]):c.resolve(d[0]=f)},function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1487],[0,2],f,f):c.resolve()},function(a){return d[1]=!1,d[1]?d[2]=!0:d[2]=!1,d[2]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[5]=c.createArray(),f!==f?d[6]=(d[5].push(f),d[5]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[5],[0,3])):c.resolve()},function(a){return c.db.table(172).fetch([[[[0,1]]]]).next().then(function(a,e){var h=a.done;a=a.value;return h?c.seq([function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1488],[0,2],f,f):c.resolve()},function(a){return d[5]=!1,d[5]?d[6]=!0:d[6]=!1,d[6]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[7]=c.createArray(),f!==f?d[8]=(d[7].push(f),d[7]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[7],[0,3])):c.resolve()},function(a){return d[3]=[0,0]}]):(e=a.item,c.seq([function(a){return d[7]=e.backupId,d[6]=e.authorityLevel,c.i64.eq(d[6],[0,20])?c.resolve(d[5]=[0,1]):c.seq([function(a){return c.i64.eq(d[6],[0,80])?c.seq([function(a){return c.i64.eq(d[7],f)?c.seq([function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1492],[0,2],f,f):c.resolve()},function(a){return d[10]=!1,d[10]?d[11]=!0:d[11]=!1,d[11]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[12]=c.createArray(),f!==f?d[13]=(d[12].push(f),d[12]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[12],[0,3])):c.resolve()},function(a){return d[9]=[0,2]}]):c.seq([function(a){return c.i64.eq(d[7],[-1,4294967295])?c.seq([function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1489],[0,2],f,f):c.resolve()},function(a){return d[11]=!1,d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[13]=c.createArray(),f!==f?d[14]=(d[13].push(f),d[13]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[13],[0,3])):c.resolve()},function(a){return d[10]=[-1,4294967295]}]):c.seq([function(a){return c.ftr(c.db.table(168).fetch(),function(a){return c.i64.eq(a.backupId,d[7])&&c.i64.eq(a.authorityLevel,[0,80])}).next().then(function(a,e){e=a.done;a=a.value;return e?c.seq([function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1490],[0,2],f,f):c.resolve()},function(a){return d[13]=!1,d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),f!==f?d[16]=(d[15].push(f),d[15]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],[0,3])):c.resolve()},function(a){return d[11]=[0,4]}]):(a.item,c.seq([function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1491],[0,2],f,f):c.resolve()},function(a){return d[13]=!1,d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),f!==f?d[16]=(d[15].push(f),d[15]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],[0,3])):c.resolve()},function(a){return d[11]=[0,3]}]))})},function(a){return d[10]=d[11]}])},function(a){return d[9]=d[10]}])},function(a){return d[8]=d[9]}]):c.seq([function(a){return d[0]!==f?c.sp(b("LSAppendDataTraceAddon"),d[0],[0,1489],[0,2],f,f):c.resolve()},function(a){return d[9]=!1,d[9]?d[10]=!0:d[10]=!1,d[10]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils]LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),f!==f?d[12]=(d[11].push(f),d[11]):0,c.nop(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],[0,3])):c.resolve()},function(a){return d[8]=[-1,4294967295]}])},function(a){return d[5]=d[8]}])},function(a){return d[3]=d[5]}]))})},function(a){return function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsProcessBackupIdsStoredProcedure]Finishing execution."),e[0]=d[3]}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5418662234884650"}),null);
__d("MWChatEncryptedBackupsSettingsDialogQuery$Parameters",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChatEncryptedBackupsSettingsDialogQuery.graphql",["MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatEncryptedBackupsSettingsDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatEncryptedBackupsSettingsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsSettingsDialogQuery",operationKind:"query",text:null}};b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4901700173259892"}),null);
__d("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql",["VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"begin_login_request",variableName:"input"}],concreteType:"VestaBeginLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_begin_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_l2_sig",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderBeginLoginMutation",selections:c},params:{id:b("VestaServerGraphQLLoginProviderBeginLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderBeginLoginMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5072170542843500"}),null);
__d("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql",["VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"finish_login_request",variableName:"input"}],concreteType:"VestaFinishLoginResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_finish_login",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_login_payload",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_success",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderFinishLoginMutation",selections:c},params:{id:b("VestaServerGraphQLLoginProviderFinishLoginMutation_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderFinishLoginMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7267509326655323"}),null);
__d("VestaServerGraphQLLoginProviderInitQuery.graphql",["VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"request"}],c=[{alias:null,args:[{kind:"Variable",name:"vesta_init_request",variableName:"request"}],concreteType:"VestaInitIqResponse",kind:"LinkedField",name:"fbid_based_auth_layer_vesta_login_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_rsa_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_opaque_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"base64url_encoded_island_ed25519_pub_signature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VestaServerGraphQLLoginProviderInitQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VestaServerGraphQLLoginProviderInitQuery",selections:c},params:{id:b("VestaServerGraphQLLoginProviderInitQuery_facebookRelayOperation"),metadata:{},name:"VestaServerGraphQLLoginProviderInitQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWEncryptedBackupsInitializeRestoreDeferred.bs",["bs_curry","promiseDone","react","requireDeferred","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("MWEncryptedBackupsInitializeRestore.bs").__setRef("MWEncryptedBackupsInitializeRestoreDeferred.bs");function a(a,c){var d=b("useReStore")();return h.useCallback(function(e){i.onReady(function(e){b("promiseDone")(b("bs_curry")._1(e.initializeRestoreStoredProcedure,d),a,c)})},[d,a,c])}f.$MWEncryptedBackupsInitializeRestore$Deferred=i;f.useHook=a}),null);
__d("MWChatEncryptedBackupsAddDevice.bs",["LS.bs","LSAddDevice","LSDataTraceCheckPoint.bs","LSEncryptedBackupsOpStatus.bs","LSEncryptedBackupsRecoveryCodeStatus.bs","LSResult.bs","LSTransaction.bs","MAWSyncState","MAWTraceUtils","MWEncryptedBackupsInitializeRestoreDeferred.bs","MessengerWebInitData","Promise","Promise.bs","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_caml_exceptions","bs_curry","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("MessengerWebInitData").sessionId,j=b("MAWSyncState").waitForInitialSync;function k(a,c,d,e){b("MAWTraceUtils").recordFailureAndFlushForTraceId(a,c,d,e)}function l(a,c,d){b("MAWTraceUtils").recordSuccessAndFlushForTraceId(a,c,d)}var m=b("bs_caml_exceptions").create("MWChatEncryptedBackupsAddDevice.Timeout");function n(a){return new(b("Promise"))(function(c,d){b("setTimeout")(function(a){return d({RE_EXN_ID:m})},a)})}function a(a,c,d,e){var f=b("useReStore")(),g=h.useMemo(function(){return b("ReQL.bs").fromTableAscending(f.table("secure_encrypted_backups_recovery_code_status"))},[f]),m=b("MWEncryptedBackupsInitializeRestoreDeferred.bs").useHook(c,d);return h.useCallback(function(c){return function(h){b("bs_curry")._1(a,void 0),b("promiseDone")(b("Promise.bs").$$catch(b("Promise").race([n(12e4),j]).then(function(a){var j={contents:function(a){}};j.contents=b("ReQLSubscription.bs").subscribe(f,g,function(a){if(a===void 0)return;if(a.length!==1)return;a=a[0];a=a.recoveryCodeStatus;if(b("bs_caml").i64_eq(a,b("LSEncryptedBackupsRecoveryCodeStatus.bs").optimistic))return;else if(b("bs_caml").i64_eq(a,b("LSEncryptedBackupsRecoveryCodeStatus.bs").invalid)){k(h,b("LSDataTraceCheckPoint.bs").labyrinthPinRestoreFailure,[],"Invalid recovery code");b("bs_curry")._1(e,void 0);return b("bs_curry")._1(j.contents,void 0)}else if(b("bs_caml").i64_eq(a,b("LSEncryptedBackupsRecoveryCodeStatus.bs").valid)){l(h,b("LSDataTraceCheckPoint.bs").labyrinthPluginCallingInitializeRestore,[]);return b("bs_curry")._1(m,void 0)}else{k(h,b("LSDataTraceCheckPoint.bs").labyrinthPinRestoreFailure,[],"LSEncryptedBackupsRecoveryCodeStatus system error");b("bs_curry")._1(d,void 0);return b("bs_curry")._1(j.contents,void 0)}});return b("ReQL.bs").first(b("ReQL.bs").fromTableAscending(f.table("encrypted_backups"))).then(function(a){if(a===void 0)return b("Promise").resolve(b("LSResult.bs").make(b("LSEncryptedBackupsOpStatus.bs").failure));var d=a.backupId;if(d!==void 0)return b("LSTransaction.bs").run(f,function(a){return b("LSAddDevice")(d,c,i,void 0,b("LS.bs").make(a))},"readWrite");else return b("Promise").resolve(b("LSResult.bs").make(b("LSEncryptedBackupsOpStatus.bs").failure))})}),function(a){b("bs_curry")._1(d,void 0);k(h,b("LSDataTraceCheckPoint.bs").labyrinthPinRestoreFailure,[],"Add Device Failure");return b("Promise").resolve(b("LSResult.bs").make(b("LSEncryptedBackupsOpStatus.bs").failure))}),void 0,void 0)}},[f,a,m,e])}f.sessionId=i;f.waitForInitialSync=j;f.recordFailureAndFlushForTraceId=k;f.recordSuccessAndFlushForTraceId=l;f.Timeout=m;f.useHook=a}),null);
__d("MWChatEncryptedBackupsAddDevice.re",["MWChatEncryptedBackupsAddDevice.bs"],(function(a,b,c,d,e,f){a=b("MWChatEncryptedBackupsAddDevice.bs").useHook;f.useHook=a}),null);
__d("MWEncryptedBackupsFetchBackupMetadata.bs",["LS.bs","LSFetchBackupsMetadata","LSTransaction.bs","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return h.useCallback(function(a){return b("LSTransaction.bs").run(c,function(a){return b("LSFetchBackupsMetadata")(void 0,b("LS.bs").make(a))},"readWrite")},[c])}f.useHook=a}),null);
__d("MWEncryptedBackupsFetchBackupMetadata.re",["MWEncryptedBackupsFetchBackupMetadata.bs"],(function(a,b,c,d,e,f){a=b("MWEncryptedBackupsFetchBackupMetadata.bs").useHook;f.useHook=a}),null);
__d("MWChatEncryptedBackupsTimeOutConfig",[],(function(a,b,c,d,e,f){"use strict";a={changePIN:{timeout:90*1e3,title:"Change PIN"},createPIN:{timeout:90*1e3,title:"Create PIN"},deleteBackup:{timeout:90*1e3,title:"Delate Backup"},optOut:{timeout:90*1e3,title:"Turn off Message Sync"},restoringViaPin:{timeout:90*1e3,title:"Restore via PIN code"}};f.MWChatEncryptedBackupsTimeOutConfig=a}),66);
__d("MWChatEncryptedBackupsTimeOutErrorIcon.react",["ix","CometImageFromIXValue.react","react","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react").forwardRef;function a(a,b){var d=a.alt;a=a.xstyle;var e=c("useCurrentDisplayMode")()==="dark"?h("210417"):h("210419");d=i.jsx(c("CometImageFromIXValue.react"),{alt:d,ref:b,source:e});return a==null?d:i.jsx("div",{className:c("stylex")(a),children:d})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("MWChatEncryptedBackupsTimeOutError.react",["fbt","ix","JSResourceForInteraction","MWButton.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsTimeOutErrorIcon.react","MWText.react","fbicon","react","useCometLazyDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.flowName;a=a.timeoutMs;a=Math.floor(parseInt(a,10)/1e3);var e=c("useCometLazyDialog")(c("JSResourceForInteraction")("CometBugReportingDialog.react").__setRef("MWChatEncryptedBackupsTimeOutError.react")),f=e[0];return j.jsx(c("MWChatEncryptedBackupsDialogLayout.react"),{icon:j.jsx(c("MWChatEncryptedBackupsTimeOutErrorIcon.react"),{}),primaryAction:j.jsx(c("MWButton.react"),{label:h._("__JHASH__Q200EzEkONw__JHASH__"),onPress:function(){return f({feedbackProblemTypeItem:{addOnPrimary:{icon:d("fbicon")._(i("555450"),24),size:60,type:"contained-icon"},body:h._("__JHASH__OJqMx626MEs__JHASH__"),dialogTitle:h._("__JHASH__7fdcAVQnKi0__JHASH__"),headline:h._("__JHASH__7fdcAVQnKi0__JHASH__")},initialProduct:"Encrypted Backups",initialTitle:h._("__JHASH__DtuRPZIlST3__JHASH__"),onClose:function(){},productListType:"messenger"})},type:"primary"}),title:h._("__JHASH__T4SqIwgbuRu__JHASH__"),children:j.jsx(c("MWText.react"),{type:"body3",children:h._("__JHASH__hn1xyOeY6lK__JHASH__",[h._param("flowName",b),h._param("timeSec",a)])})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsTriangleErrorIcon.react",["ix","CometImageFromIXValue.react","react","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react").forwardRef;function a(a,b){var d=a.alt;a=a.xstyle;var e=c("useCurrentDisplayMode")();e=e==="dark";e=e?h("210377"):h("210379");d=i.jsx(c("CometImageFromIXValue.react"),{alt:d,ref:b,source:e});return a==null?d:i.jsx("div",{className:c("stylex")(a),children:d})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("MWChatEncryptedBackupsChatHeadsIconSmall.react",["ix","cr:1376","cr:2058","cr:2344","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){if(b("cr:2344")!=null)return i.jsx(b("cr:2344"),{color:"primary",icon:d("fbicon")._(h("265785"),16)});return b("cr:2058")!=null&&b("cr:1376")!=null?i.jsx(b("cr:2058"),{icon:new(b("cr:1376"))(h("275810"),24,24),size:24}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsCommentLeftRightIconSmall.react",["ix","cr:1376","cr:2058","cr:2344","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){if(b("cr:2344")!=null)return i.jsx(b("cr:2344"),{color:"primary",icon:d("fbicon")._(h("265797"),16)});return b("cr:2058")!=null&&b("cr:1376")!=null?i.jsx(b("cr:2058"),{icon:new(b("cr:1376"))(h("275815"),24,24),size:24}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWGetCurrentUserDeviceInfo.bs",["MAWBackendBridge.bs"],(function(a,b,c,d,e,f){"use strict";a=b("MAWBackendBridge.bs").getCurrentUserDeviceInfo(void 0).sendAndReceive;f.getCurrentUserDeviceInfo=a}),null);
__d("MAWGetCurrentUserDeviceInfo.re",["MAWGetCurrentUserDeviceInfo.bs"],(function(a,b,c,d,e,f){a=b("MAWGetCurrentUserDeviceInfo.bs").getCurrentUserDeviceInfo;f.getCurrentUserDeviceInfo=a}),null);
__d("MWChatEncryptedBackupsPinCodeRestoreLockedOutStep.react",["fbt","CometMultiStepDialogPushPageContext.react","MWChatEncryptedBackupsAddonIcon.react","MWChatEncryptedBackupsChatHeadsIconSmall.react","MWChatEncryptedBackupsChevronRightIconMedium.react","MWChatEncryptedBackupsCommentLeftRightIconSmall.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsForgotPinInformationalResetPin.react","MWChatEncryptedBackupsMobileRotateIconSmall.react","MWChatEncryptedBackupsTriangleErrorIcon.react","MWListCell.react","MWText.react","MWTextPairing.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j="https://www.facebook.com/help/messenger-app/479091330683112?ref=learn_more";function a(a){var b=a.onClose,e=d("CometMultiStepDialogPushPageContext.react").useCometMultiStepDialogPushPage();a=function(){e(function(){return i.jsx(c("MWChatEncryptedBackupsForgotPinInformationalResetPin.react"),{onClose:b,pushPage:e})})};return i.jsxs(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",icon:i.jsx(c("MWChatEncryptedBackupsTriangleErrorIcon.react"),{}),title:h._("__JHASH__08MwNMdStVe__JHASH__"),children:[i.jsx("div",{className:"x9a3u73 xs9mwh0",children:i.jsx(c("MWText.react"),{color:"secondary",type:"body3",children:h._("__JHASH__fsEEXH0VivH__JHASH__")})}),i.jsxs("div",{className:"x2b8uid x4i7bpe",children:[i.jsx(c("MWListCell.react"),{addOnEnd:i.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:i.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:i.jsx(c("MWChatEncryptedBackupsMobileRotateIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__xEOaBkE_ZoH__JHASH__"),level:4,meta:h._("__JHASH__r8LpSzwMHb1__JHASH__")}),onPress:a,size:"large"}),i.jsx(c("MWListCell.react"),{addOnEnd:i.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:i.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:i.jsx(c("MWChatEncryptedBackupsChatHeadsIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__4fC8RiYE2g9__JHASH__"),level:4,meta:h._("__JHASH__lI1UNZScHi___JHASH__")}),linkProps:{rel:"noopener",target:"_blank",url:j},size:"large"}),i.jsx(c("MWListCell.react"),{addOnEnd:i.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:i.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:i.jsx(c("MWChatEncryptedBackupsCommentLeftRightIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__B-Vfr0Il-8p__JHASH__"),level:4,meta:h._("__JHASH__c2DpkbbsXfQ__JHASH__")}),onPress:b,size:"large"})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWChatEncryptedBackupsPinCodeErrorTimeRemaining.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=a.attemptsRemaining;a=a.loginTimeoutRemainingSecs;return a==null||a===0||b==null?null:h._("__JHASH__-1QslfznK9c__JHASH__",[h._plural(10-b,"attempts"),h._plural(b),h._param("time remain in hours, minutes and seconds",i(a)),h._param("attempts_remaining",b)])}function i(a){var b=Math.floor(a/3600),c=Math.floor(a/60%60);a=Math.floor(a%60);return h._("__JHASH__ab0Dg78FmB___JHASH__",[h._param("time remain in hours",j(b)),h._param("comma separator between hours and minutes",m(c>0&&b>0)),h._param("time remain in minutes",k(c)),h._param("comma separator between minutes ans seconds",m(c>0&&a>0||b>0&&a>0)),h._param("time remain in seconds",l(a))])}function j(a){return a>0?h._("__JHASH__f0VpoPgScIE__JHASH__",[h._plural(a,"hours_remaining")]):""}function k(a){return a>0?h._("__JHASH__oGYOMCWl9O4__JHASH__",[h._plural(a,"minutes_remaining")]):""}function l(a){return a>0?h._("__JHASH__d773yPL7AyI__JHASH__",[h._plural(a,"seconds_remaining")]):""}function m(a){return a?", ":""}g.useMWChatEncryptedBackupsPinCodeErrorTimeRemaining=a;g.getTimeRemainFormated=i}),98);
__d("MWChatEncryptedBackupsRestorePinTryAgainStep.react",["fbt","CometColumn.react","CometColumnItem.react","MDSLink.react","MWButton.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWText.react","react","useMWChatEncryptedBackupsPinCodeErrorTimeRemaining.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.attemptsRemaining,e=a.loginTimeoutRemainingSecs;a=a.onClose;if(e==null||e===0||b==null)return null;var f="https://www.facebook.com/help/messenger-app/479091330683112?ref=learn_more";e=h._("__JHASH__0S8o5lxRkaX__JHASH__",[h._param("time remain in hours, minutes and seconds",d("useMWChatEncryptedBackupsPinCodeErrorTimeRemaining.react").getTimeRemainFormated(e))]);b=h._("__JHASH__AuF5ookghAd__JHASH__",[h._plural(b),h._param("attempts_remaining",b)]);return i.jsx(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",icon:i.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),primaryAction:i.jsx(c("MWButton.react"),{label:h._("__JHASH__YsCkD2gR0KL__JHASH__"),onPress:a,testid:void 0,type:"primary"}),title:e,children:i.jsxs(c("CometColumn.react"),{paddingHorizontal:0,paddingVertical:0,spacing:16,children:[i.jsx(c("CometColumnItem.react"),{children:i.jsx(c("MWText.react"),{color:"secondary",type:"body3",children:b})}),i.jsx(c("CometColumnItem.react"),{children:i.jsxs(c("MWText.react"),{color:"secondary",type:"body3",children:[h._("__JHASH__eh4i8scQnxd__JHASH__")," ",i.jsx(c("MDSLink.react"),{display:"inline",href:f,rel:"noopener",target:"_blank",children:i.jsx("b",{children:h._("__JHASH__ih05KbwaNpJ__JHASH__")})})]})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWEncryptedBackupsToastRestoreInProgress",["fbt","ix","BaseToasterStateManager","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","cr:1376","cr:2344","fbicon","mwPushToast","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=c("react"),k=d("react").useRef,l=null;function a(){var a=k(null),e=c("BaseToasterStateManager").getInstance(),f=function(){if(a.current!=null||l!=null)return;var e=b("cr:2344")?j.jsx(b("cr:2344"),{color:"primary",icon:d("fbicon")._(i("538038"),24)}):void 0,f=b("cr:1376")?new(b("cr:1376"))(i("685423"),32,32):void 0;c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"restore_begin_toast");a.current=d("mwPushToast").mwPushToast({body:h._("__JHASH__Nb29tcjk7b4__JHASH__"),icon:{comet:e,mds:f},testid:"mw-chat-encrypted-backups-thread-loading-indicator"});l=window.setTimeout(function(){l=null,m()},3e3)},g=function(){m(),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"restore_failed_toast"),d("mwPushToast").mwPushErrorToast({body:h._("__JHASH__w8j4IGt-9Wa__JHASH__")})},m=function(){if(a.current==null)return;e.expire(a.current);a.current=null};return{hideInProgressToast:m,showErrorToast:g,showInProgressToast:f}}g["default"]=a}),98);
__d("MWChatEncryptedBackupsClearRecoveryCode.bs",["LSTransaction.bs","Promise","ReQL.bs","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();return h.useCallback(function(a){return b("Promise").all([(a=b("ReQL.bs")).first(a.fromTableAscending(c.table("secure_recovery_code_data"))).then(function(a){if(a===void 0)return b("Promise").resolve(void 0);var d=a.taskId;return b("LSTransaction.bs").run(c,function(a){return a.table("secure_recovery_code_data")["delete"]({hd:d,tl:0})},"readWrite")}),a.first(a.fromTableAscending(c.table("secure_encrypted_backups_recovery_code_status"))).then(function(a){if(a===void 0)return b("Promise").resolve(void 0);var d=a.pk;return b("LSTransaction.bs").run(c,function(a){return a.table("secure_encrypted_backups_recovery_code_status")["delete"]({hd:d,tl:0})},"readWrite")})])},[c])}f.useHook=a}),null);
__d("MWChatEncryptedBackupsClearRecoveryCode.re",["MWChatEncryptedBackupsClearRecoveryCode.bs"],(function(a,b,c,d,e,f){a=b("MWChatEncryptedBackupsClearRecoveryCode.bs").useHook;f.useHook=a}),null);
__d("MWEncryptedBackupsFetchBackupIds.re",["MWEncryptedBackupsFetchBackupIds.bs"],(function(a,b,c,d,e,f){a=b("MWEncryptedBackupsFetchBackupIds.bs").useHook;f.useHook=a}),null);
__d("useMWChatEncryptedBackupsAddDevice",["MWChatEncryptedBackupsAddDevice.re","MWChatEncryptedBackupsClearRecoveryCode.re","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsFetchBackupIds.re","promiseDone","react","useLabyrinthLogging"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useState;function a(a){var b=a.onComplete,e=a.onFailure,f=a.onInvalidRecoveryCode;a=i(!1);var g=a[0],j=a[1];a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var k=a.endFailure,l=a.endSuccess,m=d("MWEncryptedBackupsFetchBackupIds.re").useHook(),n=function(){j(!1)},o=d("MWChatEncryptedBackupsClearRecoveryCode.re").useHook(),p=d("MWChatEncryptedBackupsAddDevice.re").useHook(function(){j(!0)},h(function(){l(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent),m(),n(),b()},[l,m,b]),function(){n(),e(),k(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"restore_error")},function(){n(),f()});return[function(a,b){return c("promiseDone")(o().then(function(){return p(a)(b)}))},g]}g["default"]=a}),98);
__d("useVestaBackupSecretRestore",["Promise","RelayHooks","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("E2EEBackupSecretRestoreModule").__setRef("useVestaBackupSecretRestore"),i=c("requireDeferred")("VestaServerGraphQLLoginProvider").__setRef("useVestaBackupSecretRestore");function a(){var a=d("RelayHooks").useRelayEnvironment();return function(c){var d,e,f,g,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(b("Promise").all([i.load(),h.load()]));case 2:d=l.sent;e=d[0];f=e.beginLogin;g=e.finishLogin;j=e.initLogin;k=d[1].restoreBackupSecret;return l.abrupt("return",k({beginLogin:f,finishLogin:g,initLogin:j},c,{environment:a}));case 9:case"end":return l.stop()}},null,this)}}g["default"]=a}),98);
__d("MWChatEncryptedBackupsPinCodeRestoreStep.react",["fbt","CometProgressButtonIndeterminate.react","CometRelay","E2EEBackupCommon","FBLogger","FocusRegion.react","LSDataTraceCheckPoint.re","LSDataTraceType.re","MAWGating.re","MAWTraceUtils","MWButton.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsPinCodeErrorWrapper.react","MWChatEncryptedBackupsPinCodeRestoreLockedOutStep.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRestorePinTryAgainStep.react","MWChatEncryptedBackupsSettingsDialogQuery.graphql","MWChatEncryptedBackupsTimeOutConfig","MWChatEncryptedBackupsVestaUserInfoContext.react","MWText.react","QPLUserFlow","cr:2313","cr:3970","focusScopeQueries","promiseDone","react","regeneratorRuntime","useEncryptedBackupsQplImpressionRef","useMAWEncryptedBackupsToastRestoreInProgress","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsPinCode","useVestaBackupSecretRestore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useContext,l=e.useEffect,m=e.useRef,n=e.useState,o,p=function(){o&&window.clearTimeout(o)},q=function(a){p(),o=window.setTimeout(function(){return a()},d("MWChatEncryptedBackupsTimeOutConfig").MWChatEncryptedBackupsTimeOutConfig.restoringViaPin.timeout)},r="chat-encrypted-backups-dialog-layout-restore-step",s=h._("__JHASH__q_e3_ToSoki__JHASH__");function a(a){var e=a.clientID,f=a.onClose,g=a.onComplete,o=a.onForgotPin;a=n(!1);var t=a[0],u=a[1];a=c("useMAWEncryptedBackupsToastRestoreInProgress")();var v=a.showErrorToast,w=a.showInProgressToast,x=d("CometRelay").useRelayEnvironment();a=n(!1);var y=a[0],z=a[1];a=n(!1);var A=a[0],B=a[1];a=n(!1);var C=a[0],D=a[1],E=c("useVestaBackupSecretRestore")();a=k(d("MWChatEncryptedBackupsVestaUserInfoContext.react").VestaUserInfoContext);var F=a.attemptsRemaining;a=a.loginTimeoutRemainingSecs;var G=F===0,H=c("useMWChatEncryptedBackupsAddDevice")({onComplete:j(function(){if(b("cr:3970")&&R.current)return;w();g()},[g,w]),onFailure:j(function(){v()},[v]),onInvalidRecoveryCode:j(function(){return B(!0)},[])}),I=H[0];H=H[1];var J=d("useMWChatEncryptedBackupsPinCode").useMWChatEncryptedBackupsPinCode({enableMaskDelay:1e3,focusRegionId:r,onChange:function(){B(!1),z(!1)},onComplete:function(a){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:q(function(){u(!0)});f=d("MAWTraceUtils").startNewTrace(c("LSDataTraceType.re").sapVestaLogin,d("MAWTraceUtils").CONTEXT_VESTA_LOGIN);g=new TextDecoder();i.prev=3;d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").sapVestaCallingVestaLogin,[],!1);i.t0=g;i.next=8;return b("regeneratorRuntime").awrap(E({clientId:e,productUseCase:d("MAWGating.re").isEbEnabledOnIg()?"IGD_ENC_BACKUP":"MSGR_ENC_BACKUP",vestaAccountPin:a}));case 8:i.t1=i.sent;h=i.t0.decode.call(i.t0,i.t1);d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").sapVestaLoginCompletion,[],!1);i.next=20;break;case 13:i.prev=13,i.t2=i["catch"](3),c("promiseDone")(d("CometRelay").fetchQuery(x,c("MWChatEncryptedBackupsSettingsDialogQuery.graphql"),{}).toPromise()),i.t2.errorType===d("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD?(z(!0),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"incorrect_pin_code"),d("MAWTraceUtils").recordFailureAndFlushForTraceId(f,c("LSDataTraceCheckPoint.re").labyrinthPinRestoreFailure,[],"Incorrect pin code")):D(!0),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_error"),c("FBLogger")("labyrinth_web").mustfix("Error when restoring using PIN",i.t2),d("MAWTraceUtils").recordFailureAndFlushForTraceId(f,c("LSDataTraceCheckPoint.re").labyrinthPinRestoreFailure,[],i.t2.toString());case 20:h!=null&&(c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"pin_code"}}),d("MAWTraceUtils").recordCheckpointForTrace(f,c("LSDataTraceCheckPoint.re").labyrinthPluginCallingAddDevice,[],!1),I(h,f));case 21:case"end":return i.stop()}},null,this,[[3,13]])},shouldDisplayWeakPINWarning:!1}),K=J[0];J=J[1];var L=J.disabled,M=J.isLoading,N=J.onPress;J=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SCREEN");var O=h._("__JHASH__UY_FDJp7Rzt__JHASH__");M=M||H;var P=d("MWChatEncryptedBackupsTimeOutConfig").MWChatEncryptedBackupsTimeOutConfig.restoringViaPin,Q=P.timeout;P=P.title;var R=m(!1);l(function(){return function(){return p()}},[]);if(b("cr:3970")&&t&&(H||R.current)){R.current||(c("FBLogger")("labyrinth_web").mustfix("Flow "+P+" took more then "+Q+" ms"),R.current=!0);return i.jsx(b("cr:3970"),{flowName:P,timeoutMs:Q})}return G?i.jsx(c("MWChatEncryptedBackupsPinCodeRestoreLockedOutStep.react"),{onClose:f}):a!=null&&a>0&&F!=null?i.jsx(c("MWChatEncryptedBackupsRestorePinTryAgainStep.react"),{attemptsRemaining:F,loginTimeoutRemainingSecs:a,onClose:f}):i.jsxs(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",focusRegionId:r,primaryAction:M?i.jsx(c("CometProgressButtonIndeterminate.react"),{label:s,testid:void 0}):i.jsx(c("MWButton.react"),{disabled:a!=null||G||L,label:s,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SUBMIT"),N()},testid:void 0,type:"primary"}),ref:J,secondaryAction:i.jsx(c("MWButton.react"),{label:O,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_FORGOT_PIN_CLICK"),o()},testid:void 0,type:"secondary"}),showTopMargin:!1,title:h._("__JHASH__8BMtxO3Z_MC__JHASH__"),children:[i.jsx(c("MWText.react"),{type:"meta3",children:h._("__JHASH__BTgQU1N3SRg__JHASH__")}),i.jsx(c("MWChatEncryptedBackupsPinCodeErrorWrapper.react"),{error:y?h._("__JHASH__TG8l6XqQAul__JHASH__"):A||C?h._("__JHASH__oI6Lha5PMTv__JHASH__"):void 0,children:i.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:r+"-input",children:i.jsx(b("cr:2313"),babelHelpers["extends"]({},K,{disabled:a!=null||G||M,testid:void 0}))})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("QRMode",[],(function(a,b,c,d,e,f){b={modeBits:1,charCountLengths:[10,12,14]};c={modeBits:2,charCountLengths:[9,11,13]};d={modeBits:4,charCountLengths:[8,16,16]};e={modeBits:8,charCountLengths:[8,10,12]};var g={modeBits:7,charCountLengths:[0,0,0]};function a(a,b){return b.charCountLengths[Math.floor((a+7)/17)]}f.NUMERIC_MODE=b;f.ALPHANUMERIC_MODE=c;f.BYTE_MODE=d;f.KANJI_MODE=e;f.ECI_MODE=g;f.numCharCountBits=a}),66);
__d("QRCodeDataEncoding",["invariant","QRMode"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.mode,c=a.segment,e=a.version,f=a.dataBitsUsed;a=a.dataCapacity;var g=[];i(b.modeBits,4,g);i(c.byteLength,d("QRMode").numCharCountBits(e,b),g);for(var e=c.bitData,b=Array.isArray(e),c=0,e=b?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(b){if(c>=e.length)break;j=e[c++]}else{c=e.next();if(c.done)break;j=c.value}j=j;g.push(j)}g.length===f||h(0,51888);i(0,Math.min(4,a-g.length),g);i(0,(8-g.length%8)%8,g);g.length%8===0||h(0,51887);for(var j=236;g.length<a;j^=236^17)i(j,8,g);c=g.length/8;b=new Array(c).fill(0);for(var e=0;e<g.length;e++){f=g[e];b[e>>>3]|=f<<7-(e&7)}return b}function i(a,b,c){for(var b=b-1;b>=0;b--)c.push(a>>>b&1)}function b(a,b){return(a>>>b&1)!==0}g.encodeQRData=a;g.appendBits=i;g.getBit=b}),98);
__d("QRErrorCorrection",["invariant"],(function(a,b,c,d,e,f,g,h){c={LOW:{index:0,formatBits:1},MEDIUM:{index:1,formatBits:0},QUARTILE:{index:2,formatBits:3},HIGH:{index:3,formatBits:2}};function a(a){var b=[];for(var c=0;c<a-1;c++)b.push(0);b.push(1);c=1;for(var d=0;d<a;d++){for(var e=0;e<b.length;e++)b[e]=i(b[e],c),e+1<b.length&&(b[e]^=b[e+1]);c=i(c,2)}return b}function i(a,b){var c=0;for(var d=7;d>=0;d--)c=c<<1^(c>>>7)*285,c^=(b>>>d&1)*a;c>>>8===0||h(0,51884);return c}function b(a,b){var c=new Array(b.length).fill(0);for(var d=0;d<a.length;d++){var e=a[d];e=e^c.shift();c.push(0);for(var f=0;f<b.length;f++){var g=b[f];c[f]^=i(g,e)}}return c}g.ErrorCorrectionLevels=c;g.galoisComputeDivisor=a;g.galoisMultiply=i;g.galoisComputeRemainder=b}),98);
__d("QRGeneratorConstants",[],(function(a,b,c,d,e,f){a=40;b=1;c=3;d=3;e=40;var g=10,h=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];f.MAX_VERSION=a;f.MIN_VERSION=b;f.PENALTY_N1=c;f.PENALTY_N2=d;f.PENALTY_N3=e;f.PENALTY_N4=g;f.ECC_CODEWORDS_PER_BLOCK=h;f.NUM_ECC_BLOCKS=i}),66);
__d("QRUtils",["QRGeneratorConstants"],(function(a,b,c,d,e,f,g){function a(a,b){return Math.floor(h(a)/8)-d("QRGeneratorConstants").ECC_CODEWORDS_PER_BLOCK[b.index][a]*d("QRGeneratorConstants").NUM_ECC_BLOCKS[b.index][a]}function h(a){var b=(16*a+128)*a+64;if(a>=2){var c=Math.floor(a/7)+2;b-=(25*c-10)*c-55;a>=7&&(b-=36)}return b}g.getNumDataCodewords=a;g.getNumRawDataBlocks=h}),98);
__d("QRGrid",["invariant","QRCodeDataEncoding","QRErrorCorrection","QRGeneratorConstants","QRUtils"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.version,c=a.ecl;a=a.data;var d=b*4+17,e=[],f=[],g=new Array(d).fill(!1);for(var h=0;h<d;h++)e.push([].concat(g)),f.push([].concat(g));m(b,c,e,f);h=l(a,c,b);k(h,e,f);g=i(c,e,f);v(g,e,f);o(g,c,e,f);return e}function i(a,b,c){var d=0,e=Infinity;for(var f=0;f<8;f++){v(f,b,c);o(f,a,b,c);var g=x(b);g<e&&(d=f,e=g);v(f,b,c)}return d}function j(a,b){a>>>b===0||h(0,52584,b)}function k(a,b,c){var e=0,f=b.length;for(var g=f-1;g>=1;g-=2){g===6&&(g=5);for(var i=0;i<f;i++)for(var j=0;j<2;j++){var k=g-j,l=(g+1&2)===0;l=l?f-1-i:i;!c[l][k]&&e<a.length*8&&(b[l][k]=d("QRCodeDataEncoding").getBit(a[e>>>3],7-(e&7)),e++)}}e===a.length*8||h(0,51937)}function l(a,b,c){var e=d("QRGeneratorConstants").NUM_ECC_BLOCKS[b.index][c];b=d("QRGeneratorConstants").ECC_CODEWORDS_PER_BLOCK[b.index][c];c=Math.floor(d("QRUtils").getNumRawDataBlocks(c)/8);var f=e-c%e;c=Math.floor(c/e);var g=[],h=d("QRErrorCorrection").galoisComputeDivisor(b);for(var i=0,j=0;i<e;i++){var k=a.slice(j,j+c-b+(i<f?0:1));j+=k.length;var l=d("QRErrorCorrection").galoisComputeRemainder(k,h);i<f&&k.push(0);g.push([].concat(k,l))}k=[];for(var l=0;l<g[0].length;l++)for(var a=0;a<g.length;a++)(l!==c-b||a>=f)&&k.push(g[a][l]);return k}function m(a,b,c,d){r(c,d),s(c,d),p(a,c,d),o(0,b,c,d),n(a,c,d)}function n(a,b,c){if(a<7)return;var e=a;for(var f=0;f<12;f++)e=e<<1^(e>>>11)*7973;f=a<<12|e;j(f,18);for(var a=0;a<18;a++){e=d("QRCodeDataEncoding").getBit(f,a);var g=b.length-11+a%3,h=Math.floor(a/3);u(g,h,e,b,c);u(h,g,e,b,c)}}function o(a,b,c,e){b=b.formatBits<<3|a;a=c.length;var f=b;for(var g=0;g<10;g++)f=f<<1^(f>>>9)*1335;g=(b<<10|f)^21522;j(g,15);for(var b=0;b<=5;b++)u(8,b,d("QRCodeDataEncoding").getBit(g,b),c,e);u(8,7,d("QRCodeDataEncoding").getBit(g,6),c,e);u(8,8,d("QRCodeDataEncoding").getBit(g,7),c,e);u(7,8,d("QRCodeDataEncoding").getBit(g,8),c,e);for(var f=9;f<15;f++)u(14-f,8,d("QRCodeDataEncoding").getBit(g,f),c,e);for(var b=0;b<8;b++)u(a-1-b,8,d("QRCodeDataEncoding").getBit(g,b),c,e);for(var f=8;f<15;f++)u(8,a-15+f,d("QRCodeDataEncoding").getBit(g,f),c,e);u(8,a-8,!0,c,e)}function p(a,b,c){a=w(b.length,a);var d=a.length;for(var e=0;e<d;e++)for(var f=0;f<d;f++)e===0&&f===0||e===0&&f===d-1||e===d-1&&f===0||q(a[e],a[f],b,c)}function q(a,b,c,d){for(var e=-2;e<=2;e++)for(var f=-2;f<=2;f++){var g=Math.max(Math.abs(f),Math.abs(e))!==1;u(a+f,b+e,g,c,d)}}function r(a,b){for(var c=0;c<a.length;c++){var d=c%2===0;u(6,c,d,a,b);u(c,6,d,a,b)}}function s(a,b){var c=a.length;t(3,3,a,b);t(c-4,3,a,b);t(3,c-4,a,b)}function t(a,b,c,d){for(var e=-4;e<=4;e++)for(var f=-4;f<=4;f++){var g=Math.max(Math.abs(f),Math.abs(e)),h=a+f,i=b+e;if(0<=h&&h<c.length&&0<=i&&i<c.length){g=g!==2&&g!==4;u(h,i,g,c,d)}}}function u(a,b,c,d,e){d[b][a]=c,e[b][a]=!0}function v(a,b,c){a>=0&&a<=7||h(0,51938);for(var d=0;d<b.length;d++)for(var e=0;e<b.length;e++){var f=!1;switch(a){case 0:f=(e+d)%2===0;break;case 1:f=d%2===0;break;case 2:f=e%3===0;break;case 3:f=(e+d)%3===0;break;case 4:f=(Math.floor(e/3)+Math.floor(d/2))%2===0;break;case 5:f=e*d%2+e*d%3===0;break;case 6:f=(e*d%2+e*d%3)%2===0;break;case 7:f=((e+d)%2+e*d%3)%2===0;break}!c[d][e]&&f&&(b[d][e]=!b[d][e])}}function w(a,b){if(b===1)return[];else{var c=Math.floor(b/7)+2;b=b===32?26:Math.ceil((b*4+4)/(c*2-2))*2;var d=[6];for(var a=a-7;d.length<c;a-=b)d.splice(1,0,a);return d}}function x(a){var b=a.length,c=0;for(var e=0;e<b;e++){var f=!1,g=0,h=[0,0,0,0,0,0,0];for(var i=0;i<b;i++)a[e][i]===f?(g++,g===5?c+=d("QRGeneratorConstants").PENALTY_N1:g>5&&c++):(y(b,g,h),f||(c+=z(h)*d("QRGeneratorConstants").PENALTY_N3),f=a[e][i],g=1);c+=A(b,f,g,h)*d("QRGeneratorConstants").PENALTY_N3}for(var i=0;i<b;i++){f=!1;g=0;h=[0,0,0,0,0,0,0];for(var e=0;e<b;e++)a[e][i]===f?(g++,g===5?c+=d("QRGeneratorConstants").PENALTY_N1:g>5&&c++):(y(b,g,h),f||(c+=z(h)*d("QRGeneratorConstants").PENALTY_N3),f=a[e][i],g=1);c+=A(b,f,g,h)*d("QRGeneratorConstants").PENALTY_N3}for(var e=0;e<b-1;e++)for(var f=0;f<b-1;f++){g=a[e][f];g===a[e][f+1]&&g===a[e+1][f]&&g===a[e+1][f+1]&&(c+=d("QRGeneratorConstants").PENALTY_N2)}h=0;for(var i=a,g=Array.isArray(i),f=0,i=g?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=i.length)break;e=i[f++]}else{f=i.next();if(f.done)break;e=f.value}a=e;h=a.reduce(function(a,b){return a+(b?1:0)},h)}e=b*b;a=Math.ceil(Math.abs(h*20-e*10)/e)-1;c+=a*d("QRGeneratorConstants").PENALTY_N4;return c}function y(a,b,c){b=b;c[0]===0&&(b+=a);c.pop();c.unshift(b)}function z(a){var b=a[1],c=b>0&&a[2]===b&&a[3]===b*3&&a[4]===b&&a[5]===b;return(c&&a[0]>=b*4&&a[6]>=b?1:0)+(c&&a[6]>=b*4&&a[0]>=b?1:0)}function A(a,b,c,d){c=c;b&&(y(a,c,d),c=0);c+=a;y(a,c,d);return z(d)}g.makeQRGrid=a}),98);
__d("QRRenderer",[],(function(a,b,c,d,e,f){var g=7;function a(a,b){var c=b.blockConfig,d=b.finderConfig;d=d===void 0?{style:"square"}:d;b=b.imageConfig;var e=b.icon;e=e===void 0?null:e;var f=b.size,g=b.background;g=g===void 0?"#fff":g;var l=b.foreground;l=l===void 0?"#000":l;b=b.mimeType;b=b===void 0?"image/png":b;var m=document.createElement("canvas"),n=m.getContext("2d");m.width=f;m.height=f;n.fillStyle=j(g,n);n.fillRect(0,0,f,f);g=a.length;f=f/g;n.fillStyle=j(l,n);k(d,f,n);l=function(a){return!1};if(e!=null&&typeof (e==null?void 0:e.iconDrawFn)==="function"){d=e.iconDrawFn;var o=e.iconOriginalSizePx,p=e.iconScale;e=e.iconBorderOffset;e=e===void 0?0:e;var q=n.canvas.width;p=Math.sqrt(p);var r=q*p;p=g*p;q=Math.floor((q-r)/2);d(n,{x:q,y:q},r/o);var s=Math.floor((g-p)/2)-e,t=Math.floor((g+p)/2)+e;l=function(a){var b=a.x;a=a.y;return b<t&&b>s&&a>s&&a<t}}for(var d=0;d<g;d++)for(var q=0;q<g;q++)a[d][q]&&!h({x:q,y:d},g)&&!l({x:q,y:d})&&i({x:q,y:d},f,c,n);return m.toDataURL(b)}function h(a,b){var c=a.x;a=a.y;return c<=g&&a<=g||c>=b-g&&a<=g||a>=b-g&&c<=g}function i(a,b,c,d){c===void 0&&(c={style:"square"});var e=a.x*b;a=a.y*b;switch(c.style){case"circle":c=b/2.2;return o({x:e,y:a},c,d);case"square":return d.fillRect(e,a,b,b)}}function j(a,b){if(typeof a==="string")return a;b=b.createLinearGradient(a.start.x,a.start.y,a.end.x,a.end.y);for(var a=a.colorStops,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b.addColorStop(e.offset,e.color)}return b}function k(a,b,c){var d=b*g,e=c.canvas.width;e=[{x:0,y:0},{x:0,y:e-d},{x:e-d,y:0}];e.forEach(function(e){l({origin:e,size:d,finderConfig:a,blockSize:b,context:c})})}function l(a){var b=a.origin,c=a.size,d=a.finderConfig,e=a.blockSize;a=a.context;switch(d.style){case"rounded":return n({origin:b,size:c,radius:d.radius,blockSize:e,context:a});case"square":return m({origin:b,size:c,blockSize:e,context:a})}}function m(a){var b=a.origin,c=a.size,d=a.blockSize;a=a.context;q({origin:b,size:c,outerRadius:0,innerRadius:0,strokeWidth:d,context:a});d=d*3;var e=d/2;a.fillRect(b.x+c/2-e,b.y+c/2-e,d,d)}function n(a){var b=a.origin,c=a.size,d=a.radius,e=a.blockSize;a=a.context;var f=d/2;q({origin:b,size:c,outerRadius:d,innerRadius:f,strokeWidth:e,context:a});d=e*3/2;o({x:b.x+c/2-d,y:b.y+c/2-d},d,a)}function o(a,b,c){var d=a.x;a=a.y;var e=d+b,f=a+b;c.beginPath();c.arc(e,f,b*p(d*a),0,2*Math.PI);c.closePath();c.fill()}function p(a){var b=.25;a=Math.sin(a)*1e4;a-=Math.floor(a);return a*b+(1-b)}function q(a){var b=a.origin,c=a.size,d=a.outerRadius,e=a.innerRadius,f=a.strokeWidth;a=a.context;var g=c-f*2;a.beginPath();r({origin:b,size:c,radius:d,context:a});r({origin:{x:b.x+f,y:b.y+f},size:g,radius:e,context:a});a.fill("evenodd");a.closePath()}function r(a){var b=a.origin,c=b.x;b=b.y;var d=a.size,e=a.radius;a=a.context;a.moveTo(c+e,b);a.lineTo(c+d-e,b);a.quadraticCurveTo(c+d,b,c+d,b+e);a.lineTo(c+d,b+d-e);a.quadraticCurveTo(c+d,b+d,c+d-e,b+d);a.lineTo(c+e,b+d);a.quadraticCurveTo(c,b+d,c,b+d-e);a.lineTo(c,b+e);a.quadraticCurveTo(c,b,c+e,b)}f.render=a}),66);
__d("QRSegment",["invariant","QRCodeDataEncoding","QRGeneratorConstants","QRMode","QRUtils"],(function(a,b,c,d,e,f,g,h){function a(a){a=i(a);var b=[];for(var c=a,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;d("QRCodeDataEncoding").appendBits(g,8,b)}return{byteLength:a.length,bitData:b}}function i(a){a=encodeURI(a);var b=[];for(var c=0;c<a.length;c++)a.charAt(c)!="%"?b.push(a.charCodeAt(c)):(b.push(parseInt(a.substr(c+1,2),16)),c+=2);return b}function b(a,b,c,e){e===void 0&&(e=d("QRGeneratorConstants").MIN_VERSION);e=e;var f=0,g=0;while(!0){g=d("QRUtils").getNumDataCodewords(e,b)*8;var i=j(e,c,a);if(i<=g){f=i;break}e<d("QRGeneratorConstants").MAX_VERSION||h(0,51864);e++}return{version:e,dataBitsUsed:f,dataCapacity:g}}function j(a,b,c){a=d("QRMode").numCharCountBits(a,b);return c.byteLength>=1<<a?Infinity:4+a+c.bitData.length}g.makeSegment=a;g.toUtf8ByteArray=i;g.getMetadataForSegment=b;g.getTotalBitsForSegemnt=j}),98);
__d("QRGenerator",["QRCodeDataEncoding","QRErrorCorrection","QRGrid","QRMode","QRRenderer","QRSegment"],(function(a,b,c,d,e,f,g){function a(a){var b=a.renderOptions;a=babelHelpers.objectWithoutPropertiesLoose(a,["renderOptions"]);a=h(a);return d("QRRenderer").render(a,b)}function h(a){var b=a.value,c=a.mode;c=c===void 0?d("QRMode").BYTE_MODE:c;var e=a.version;a=a.errorCorrectionLevel;a=a===void 0?"LOW":a;b=d("QRSegment").makeSegment(b);a=d("QRErrorCorrection").ErrorCorrectionLevels[a];e=d("QRSegment").getMetadataForSegment(b,a,c,e);var f=e.version,g=e.dataBitsUsed;e=e.dataCapacity;c=d("QRCodeDataEncoding").encodeQRData({mode:c,version:f,segment:b,dataBitsUsed:g,dataCapacity:e});return d("QRGrid").makeQRGrid({version:f,ecl:a,data:c})}g.generateDataUri=a;g.generateQRGrid=h}),98);
__d("WAArmadilloQRCode.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a=babelHelpers["extends"]({},null);b=babelHelpers["extends"]({},null);c=babelHelpers["extends"]({},null);e=babelHelpers["extends"]({},null);f=babelHelpers["extends"]({},null);a.internalSpec={integral:[1,d("WAProtoConst").TYPES.MESSAGE,c],ancillary:[2,d("WAProtoConst").TYPES.MESSAGE,b]};b.internalSpec={};c.internalSpec={messageHistorySync:[1,d("WAProtoConst").TYPES.MESSAGE,f],encryptedBackup:[2,d("WAProtoConst").TYPES.MESSAGE,e],__oneofs__:{userflow:["messageHistorySync","encryptedBackup"]}};e.internalSpec={identityKey:[1,d("WAProtoConst").TYPES.BYTES],secretKey:[2,d("WAProtoConst").TYPES.BYTES]};f.internalSpec={identityKey:[1,d("WAProtoConst").TYPES.BYTES],secretKey:[2,d("WAProtoConst").TYPES.BYTES]};g.QRCodePayloadSpec=a;g.QRCodePayload$AncillarySpec=b;g.QRCodePayload$IntegralSpec=c;g.QRCodePayload$EncryptedBackupSpec=e;g.QRCodePayload$MessageHistorySyncSpec=f}),98);
__d("usePromiseResult",["CancelablePromise","promiseDone","react","useIsMountedRef"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef,j=b.useState;function a(a,b){var d=j(null),e=d[0],f=d[1];d=j(null);var g=d[0],k=d[1],l=i(null),m=c("useIsMountedRef")();h(function(){l.current=new(c("CancelablePromise"))(a());c("promiseDone")(l.current.getPromise().then(function(a){m.current===!0&&(f(a),k(null))})["catch"](function(a){m.current===!0&&(f(null),k(a))}));return function(){l.current&&l.current.cancel()}},b);return[e,g,l.current]}g["default"]=a}),98);
__d("MWChatQRCodeImage.react",["CometGlimmer.react","CometImage.react","FBLogger","MAWGetCurrentUserDeviceInfo.re","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","QRGenerator","WAArmadilloQRCode.pb","base64-js","encodeProtobuf","react","regeneratorRuntime","unrecoverableViolation","useCurrentDisplayMode","usePromiseResult"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={glimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x1u5z0ei",width:"xafpxmx"}};function j(a){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.prev=0;i.next=3;return b("regeneratorRuntime").awrap(d("MAWGetCurrentUserDeviceInfo.re").getCurrentUserDeviceInfo());case 3:e=i.sent;if(!((e==null?void 0:e.identityKey)==null)){i.next=6;break}throw c("unrecoverableViolation")("Device info identity key should not be null","messenger_e2ee_web");case 6:f=d("encodeProtobuf").encodeProtobuf(d("WAArmadilloQRCode.pb").QRCodePayloadSpec,{integral:{encryptedBackup:{identityKey:e.identityKey,secretKey:null}}});g=d("base64-js").fromByteArray(f.readByteArray());h=a?"#fff":"#000";return i.abrupt("return",d("QRGenerator").generateDataUri({errorCorrectionLevel:"MEDIUM",renderOptions:{blockConfig:{style:"circle"},finderConfig:{radius:10,style:"rounded"},imageConfig:{background:"rgba(0,0,0,0)",foreground:h,icon:{iconBorderOffset:0,iconDrawFn:k,iconOriginalSizePx:36,iconScale:.1},size:240}},value:g}));case 12:i.prev=12,i.t0=i["catch"](0),c("FBLogger")("messenger_e2ee_web").catching(i.t0).mustfixThrow("Error generating QR code image URI");case 15:case"end":return i.stop()}},null,this,[[0,12]])}function k(a,b,c){var d=b.x;b=b.y;a.beginPath();a.moveTo(d+6.74994*c,b+17.9438*c);a.bezierCurveTo(d+6.74994*c,b+11.6734*c,d+11.6625*c,b+7.03125*c,d+17.9999*c,b+7.03125*c);a.bezierCurveTo(d+24.3374*c,b+7.03125*c,d+29.2499*c,b+11.6734*c,d+29.2499*c,b+17.9438*c);a.bezierCurveTo(d+29.2499*c,b+24.2141*c,d+24.3374*c,b+28.8563*c,d+17.9999*c,b+28.8563*c);a.bezierCurveTo(d+16.8616*c,b+28.8563*c,d+15.7695*c,b+28.7059*c,d+14.7434*c,b+28.4237*c);a.bezierCurveTo(d+14.5439*c,b+28.3688*c,d+14.3318*c,b+28.3844*c,d+14.1425*c,b+28.468*c);a.lineTo(d+11.9096*c,b+29.4537*c);a.bezierCurveTo(d+11.3255*c,b+29.7115*c,d+10.6661*c,b+29.2961*c,d+10.6465*c,b+28.6579*c);a.lineTo(d+10.5853*c,b+26.6565*c);a.bezierCurveTo(d+10.5778*c,b+26.4101*c,d+10.4668*c,b+26.1795*c,d+10.2831*c,b+26.0152*c);a.bezierCurveTo(d+8.09409*c,b+24.0576*c,d+6.74994*c,b+21.2235*c,d+6.74994*c,b+17.9438*c);a.closePath();a.moveTo(d+14.5491*c,b+15.8921*c);a.lineTo(d+11.2444*c,b+21.135*c);a.bezierCurveTo(d+10.9272*c,b+21.6382*c,d+11.5457*c,b+22.2052*c,d+12.0195*c,b+21.8456*c);a.lineTo(d+15.5693*c,b+19.1516*c);a.bezierCurveTo(d+15.8094*c,b+18.9694*c,d+16.1412*c,b+18.9684*c,d+16.3824*c,b+19.1492*c);a.lineTo(d+19.0108*c,b+21.1206*c);a.bezierCurveTo(d+19.7995*c,b+21.7122*c,d+20.9252*c,b+21.5044*c,d+21.4509*c,b+20.6704*c);a.lineTo(d+24.7556*c,b+15.4274*c);a.bezierCurveTo(d+25.0727*c,b+14.9242*c,d+24.4542*c,b+14.3572*c,d+23.9804*c,b+14.7168*c);a.lineTo(d+20.4306*c,b+17.4108*c);a.bezierCurveTo(d+20.1905*c,b+17.5931*c,d+19.8587*c,b+17.594*c,d+19.6175*c,b+17.4131*c);a.lineTo(d+16.9891*c,b+15.4419*c);a.bezierCurveTo(d+16.2004*c,b+14.8503*c,d+15.0747*c,b+15.058*c,d+14.5491*c,b+15.8921*c);a.closePath();a.fill("evenodd");a.restore();a.restore()}function a(){var a=c("useCurrentDisplayMode")(),b=a==="dark";a=c("usePromiseResult")(function(){return j(b)},[]);var e=a[0];a=a[1];if(a!=null||e==null){c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"qr_code_is_not_shown");return h.jsx(c("CometGlimmer.react"),{index:0,xstyle:i.glimmer})}return h.jsx(c("CometImage.react"),{height:240,src:e,width:240})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatQRCodeEventEmitter",["BaseEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h="scanQRCode",i=!0,j=new(c("BaseEventEmitter"))();function a(){i&&(j.emit(h),i=!1)}function b(a){var b=j.addListener(h,a);return function(){return b.remove()}}g.emit=a;g.subscribe=b}),98);
__d("MWEncryptedBackupsInitializeRestoreAfterAddDevice.bs",["LSAuthorityLevel.bs","MWEncryptedBackupsInitializeRestoreDeferred.bs","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_curry","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c,d){var e=b("useReStore")(),f=b("MWEncryptedBackupsInitializeRestoreDeferred.bs").useHook(c,d);return h.useCallback(function(c){b("bs_curry")._1(a,void 0);c=b("ReQL.bs").fromTableAscending(e.table("secure_encrypted_backups_client_state"));return b("ReQLSubscription.bs").subscribe(e,c,function(a){if(a===void 0)return b("bs_curry")._1(d,void 0);if(a.length!==1)return;a=a[0];if(b("bs_caml").i64_eq(a.authorityLevel,b("LSAuthorityLevel.bs").authoritative))return b("bs_curry")._1(f,void 0)})},[e,a,f,d])}f.useHook=a}),null);
__d("MWEncryptedBackupsInitializeRestoreAfterAddDevice.re",["MWEncryptedBackupsInitializeRestoreAfterAddDevice.bs"],(function(a,b,c,d,e,f){a=b("MWEncryptedBackupsInitializeRestoreAfterAddDevice.bs").useHook;f.useHook=a}),null);
__d("MWChatQRCodeScanStep.react",["fbt","ix","CometColumn.react","CometColumnItem.react","CometIcon.react","MWButton.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsQPLEvents","MWChatQRCodeEventEmitter","MWChatQRCodeImage.react","MWEncryptedBackupsInitializeRestoreAfterAddDevice.re","MWText.react","QPLUserFlow","cometPushToast","fbicon","react","useEncryptedBackupsQplImpressionRef","useLabyrinthLogging"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useEffect;function a(a){var b=a.actionsDirection,e=a.onClose,f=a.onScan;a=a.otherOptions;var g=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),l=g.endFailure,m=g.endSuccess,n=d("MWEncryptedBackupsInitializeRestoreAfterAddDevice.re").useHook(function(){f()},function(){m(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent),e(),d("cometPushToast").cometPushToast({icon:j.jsx(c("CometIcon.react"),{color:"white",icon:d("fbicon")._(i("492714"),20)}),message:h._("__JHASH__cGK0TP74ZTl__JHASH__")})},function(){l(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"restore_error"),e(),d("cometPushToast").cometPushErrorToast({message:h._("__JHASH__tW3Pg0nGmbU__JHASH__")})});k(function(){var a=d("MWChatQRCodeEventEmitter").subscribe(function(){c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"qr_code"}}),n()});return function(){a()}},[f,n]);g=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"qr_code_restore_screen");return j.jsx(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:b,primaryAction:j.jsx(c("MWButton.react"),babelHelpers["extends"]({},a,{testid:void 0,type:"secondary"})),ref:g,children:j.jsxs(c("CometColumn.react"),{align:"center",verticalAlign:"center",children:[j.jsx(c("CometColumnItem.react"),{paddingVertical:20,children:j.jsx(c("MWChatQRCodeImage.react"),{})}),j.jsx(c("CometColumnItem.react"),{paddingTop:20,children:j.jsx("div",{children:j.jsx(c("MWText.react"),{align:"center",type:"entityHeaderHeadline2",children:h._("__JHASH__nG0h0IN5F5K__JHASH__")})})}),j.jsx(c("CometColumnItem.react"),{paddingTop:20,children:j.jsx(c("MWText.react"),{type:"body3",children:h._("__JHASH__Ys_wTVJWBlK__JHASH__",[h._implicitParam("=m1",j.jsx("b",{children:h._("__JHASH__QASfVfV7OW4__JHASH__")})),h._implicitParam("=m4",j.jsx("b",{children:h._("__JHASH__UeXv0rWKw74__JHASH__")}))])})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsCreatePinInstruction.react",["fbt","MDSLink.react","MWButton.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsForgotPinInformationalResetPin.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWChatEncryptedBackupsRestoreEndOfRoadDialog.react","MWEncryptedBackupsListenForChangesToVirtualDevices.re","MWListCell.react","MWText.react","MWTextPairing.react","QPLUserFlow","deferredLoadComponent","react","requireDeferred","useEncryptedBackupsQplImpressionRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useState,l=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsPinCodeRestoreStep.react").__setRef("MWChatEncryptedBackupsCreatePinInstruction.react")),m="https://www.facebook.com/help/messenger-app/3357856081116516?ref=learn_more";function a(a){var b=a.onClose,e=a.onComplete,f=a.pushPage;a=k(!0);var g=a[0];a=a[1];var n=d("MWEncryptedBackupsListenForChangesToVirtualDevices.re").useHook(function(){},function(){},function(){}),o=n[0],p=n[1];o();g&&p!=null&&a(!1);var q=j(function(){return f(function(){return i.jsx(c("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react"),{onClose:b})})},[b,f]),r=j(function(){return f(function(){return i.jsx(c("MWChatEncryptedBackupsForgotPinInformationalResetPin.react"),{onClose:b,pushPage:f})})},[b,f]),s=j(function(){return f(function(){return p==null?null:i.jsx(l,{clientID:p,onClose:b,onComplete:e,onForgotPin:r})})},[b,e,f,p,r]);n=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_IMPRESSION");return i.jsxs(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",icon:i.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),primaryAction:i.jsx(c("MWButton.react"),{disabled:g,label:h._("__JHASH__azfzhOvLeld__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_ENTER_PIN_CLICK"),s()}}),ref:n,secondaryAction:i.jsx(c("MWButton.react"),{label:h._("__JHASH__JYt7hk4FEPk__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_CANT_CREATE_PIN_CLICK"),q()},type:"secondary"}),children:[i.jsx("div",{className:"xewm4ob",children:i.jsx(c("MWText.react"),{align:"center",type:"headlineEmphasized2",children:h._("__JHASH__r-UBPe_4xvO__JHASH__")})}),i.jsxs("div",{className:"xvue9z xm77wn2 x169t7cy x19f6ikt",children:[i.jsx(c("MWListCell.react"),{content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__I5BWRfz9kj6__JHASH__"),level:4,meta:i.jsxs(i.Fragment,{children:[h._("__JHASH__66f6j4edNUW__JHASH__")," ",i.jsx(c("MDSLink.react"),{display:"inline",href:m,onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_LEARN_MORE_LINK_CLICK")},rel:"noopener",target:"_blank",children:i.jsx("b",{children:h._("__JHASH__yk1kU3qH_5u__JHASH__")})})]})}),size:"large"}),i.jsx("br",{}),i.jsx(c("MWListCell.react"),{content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__6OnapwRiU-I__JHASH__"),level:4,meta:i.jsxs(c("MWText.react"),{type:"meta4",children:[h._("__JHASH__Hyp2Dk13FKd__JHASH__"),i.jsx("br",{}),h._("__JHASH__KtIvQ3G8r-K__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__mnPynM3vIb8__JHASH__")}))]),i.jsx("br",{}),h._("__JHASH__YLnPm0Rvu_i__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__8Oq20T6QwSt__JHASH__")}))]),i.jsx("br",{}),h._("__JHASH__Bvgp1w5pZ4___JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__0zO-AR2mh_u__JHASH__")}))]),i.jsx("br",{}),h._("__JHASH__M34cp2-7gGO__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__0dYzuV-3JUF__JHASH__")}))])]})}),size:"large"})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsCreateRecoveryCodeInstruction.react",["fbt","MDSLink.react","MWButton.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWChatEncryptedBackupsRestoreEndOfRoadDialog.react","MWEncryptedBackupsListenForChangesToVirtualDevices.re","MWListCell.react","MWText.react","MWTextPairing.react","QPLUserFlow","react","useEncryptedBackupsQplImpressionRef","useMWChatEncryptedBackupsRestoreSteps"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useState,l="https://www.facebook.com/help/messenger-app/3357856081116516?ref=learn_more";function a(a){var b=a.onClose,e=a.onComplete,f=a.pushPage;a=k(!0);var g=a[0];a=a[1];var m=d("MWEncryptedBackupsListenForChangesToVirtualDevices.re").useHook(function(){},function(){},function(){}),n=m[0];m[1];m=m[2];n();g&&m>0&&a(!1);var o=j(function(){return f(function(){return i.jsx(c("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react"),{onClose:b})})},[b,f]);n=j(function(){return f(function(){return i.jsx(c("MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react"),{onComplete:b,pushPage:f})})},[b,f]);m=d("useMWChatEncryptedBackupsRestoreSteps").useMWChatEncryptedBackupsRestoreSteps({isQRCodeEnabled:!1,onClose:b,onComplete:e,onForgotRC:n});a=m.onPushRestoreByRecoveryCodePage;var p=a(f);e=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_IMPRESSION");return i.jsxs(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",icon:i.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),primaryAction:i.jsx(c("MWButton.react"),{disabled:g,label:h._("__JHASH__h_4FqGjHpL7__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_ENTER_CODE_CLICK"),p()}}),ref:e,secondaryAction:i.jsx(c("MWButton.react"),{label:h._("__JHASH__wkez3K_SoHV__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_CANT_GENERATE_CODE_CLICK"),o()},type:"secondary"}),children:[i.jsx("div",{className:"xewm4ob",children:i.jsx(c("MWText.react"),{align:"center",type:"headlineEmphasized2",children:h._("__JHASH__LW-p0wWOQcY__JHASH__")})}),i.jsxs("div",{className:"xvue9z xm77wn2 x169t7cy x19f6ikt",children:[i.jsx(c("MWListCell.react"),{content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__j4tUcRVJrVr__JHASH__"),level:4,meta:i.jsxs(i.Fragment,{children:[h._("__JHASH__LvOpAmvQ9Zs__JHASH__")," ",i.jsx(c("MDSLink.react"),{display:"inline",href:l,onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_LEARN_MORE_LINK_CLICK")},rel:"noopener",target:"_blank",children:i.jsx("b",{children:h._("__JHASH__JFv5llOM1oL__JHASH__")})})]})}),size:"large"}),i.jsx("br",{}),i.jsx(c("MWListCell.react"),{content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__lp7C-V05Te3__JHASH__"),level:4,meta:i.jsxs(c("MWText.react"),{type:"meta4",children:[h._("__JHASH__HG5XJ8DHe4v__JHASH__"),i.jsx("br",{}),h._("__JHASH__ZfRAIOlNhhF__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__mnPynM3vIb8__JHASH__")}))]),i.jsx("br",{}),h._("__JHASH__8h6q580afos__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__8Oq20T6QwSt__JHASH__")}))]),i.jsx("br",{}),h._("__JHASH__XEDcoIgGX9g__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__0zO-AR2mh_u__JHASH__")}))]),i.jsx("br",{}),h._("__JHASH__TJHGYNx1Byx__JHASH__",[h._implicitParam("=m1",i.jsx("b",{children:h._("__JHASH__ORhXAbatdS9__JHASH__")}))])]})}),size:"large"})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncryptedBackupsKVSOnlyRestoreStep.react",["fbt","MWChatEncryptedBackupsAddonIcon.react","MWChatEncryptedBackupsChevronRightIconMedium.react","MWChatEncryptedBackupsCreatePinInstruction.react","MWChatEncryptedBackupsCreateRecoveryCodeInstruction.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsDots3HorizontalIconSmall.react","MWChatEncryptedBackupsInterstitialIcon.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsTextIconSmall.react","MWListCell.react","MWText.react","MWTextPairing.react","QPLUserFlow","react","useEncryptedBackupsQplImpressionRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback;function a(a){var b=a.onClose,e=a.onComplete,f=a.pushPage,g=j(function(){return f(function(){return i.jsx(c("MWChatEncryptedBackupsCreatePinInstruction.react"),{onClose:b,onComplete:e,pushPage:f})})},[b,e,f]),k=j(function(){return f(function(){return i.jsx(c("MWChatEncryptedBackupsCreateRecoveryCodeInstruction.react"),{onClose:b,onComplete:e,pushPage:f})})},[b,e,f]);a=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_OPTIONS_IMPRESSION");return i.jsxs(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",icon:i.jsx(c("MWChatEncryptedBackupsInterstitialIcon.react"),{}),innerContentPaddingVertical:0,ref:a,title:h._("__JHASH__JiPJcQZ2ODs__JHASH__"),children:[i.jsx(c("MWText.react"),{color:"secondary",type:"body4",children:h._("__JHASH__KBLSFG_4ok9__JHASH__")}),i.jsxs("div",{className:"xk68kj7 x2b8uid x1miatn0",children:[i.jsx(c("MWListCell.react"),{addOnEnd:i.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:i.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:i.jsx(c("MWChatEncryptedBackupsDots3HorizontalIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__U-M3lpEzQQ___JHASH__"),level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_PIN_CODE_CLICK"),g()},size:"large"}),i.jsx(c("MWListCell.react"),{addOnEnd:i.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:i.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:i.jsx(c("MWChatEncryptedBackupsTextIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:i.jsx(c("MWTextPairing.react"),{headline:h._("__JHASH__1wcr3eW7-SS__JHASH__"),level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_RECOVERY_CODE_CLICK"),k()},size:"large"})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatEncriptedBackupsAccessCodeInput.react",["fbt","BaseTextArea.react","MWText.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useRef,k={container:{backgroundColor:"x443n21",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",marginTop:"x1xmf6yo",paddingBottom:"x1g2khh7",paddingEnd:"x13omvei",paddingStart:"x1m6arcz",paddingTop:"xyamay9",textAlign:"x2b8uid",":hover":{backgroundImage:"x10bruuh"}},input:{backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"x112ta8",borderStart:"xxxdfa6",color:"xzsf02u",end:"xds687c",fontSize:"x1lkfr7t",fontWeight:"x1s688f",height:"x5yr21d",letterSpacing:"xoiqa5b",lineHeight:"x11m8ghp",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingBottom:"x18d9i69",paddingTop:"x1y1aw1k",position:"x10l6tqk",start:"x17qophe",textAlign:"x1yc453h",top:"x1jzctok",width:"xh8yej3","::placeholder":{color:"xha3pab"}},inputWrapper:{height:"xwzfr38",marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",position:"x1n2onr6",width:"x1hfn5x7"}},l="---- ---- ---- ---- ----\n---- ---- ---- ---- ----",m=40;function a(a){var b=a.onFocus,d=a.onValueChange,e=a.value;a=j();var f=function(a){return a.toUpperCase().replace(/[^A-Z0-9]/g,"")},g=function(a){a=f(a).substring(0,m);var b=f(e);if(a===b)return;d(a)};return i.jsxs("div",{className:c("stylex")(k.container),children:[i.jsx(c("MWText.react"),{type:"meta3",children:h._("__JHASH__xBAImOW2o36__JHASH__")}),i.jsxs("div",{className:c("stylex")(k.inputWrapper),children:[i.jsx("span",{style:{fontFamily:"var(--font-family-code)"},children:i.jsx(c("BaseTextArea.react"),{maxRows:2,onFocus:b,placeholder:l,readOnly:!0,suppressFocusRing:!0,unresizable:!0,value:e===""?l:o(e),xstyle:k.input})}),i.jsx("span",{style:{fontFamily:"var(--font-family-code)"},children:i.jsx(c("BaseTextArea.react"),{maxRows:2,onFocus:b,onValueChange:g,ref:a,suppressFocusRing:!0,testid:void 0,unresizable:!0,value:e===""?e:n(e),xstyle:k.input})})]})]})}a.displayName=a.name+" [from "+f.id+"]";function n(a){a=a.split("");var b=0,c=[];for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;c.length===24?c.push("\n"):b>0&&b%4===0&&c.push(" ");c.push(f);b+=1}return c.join("")}function o(a){var b=a.split("");return l.split("").map(function(a){if(a===" "||a==="\n"||b.length===0)return a;else{b.pop();return" "}}).join("")}g["default"]=a}),98);
__d("MWChatEncryptedBackupsAccessCodeInputStep.react",["fbt","CometProgressButtonIndeterminate.react","MWButton.react","MWChatEncriptedBackupsAccessCodeInput.react","MWChatEncryptedBackupsDialogLayout.react","MWChatEncryptedBackupsQPLEvents","MWText.react","QPLUserFlow","react","useEncryptedBackupsQplImpressionRef","useMAWEncryptedBackupsToastRestoreInProgress","useMWChatEncryptedBackupsAddDevice"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useState,l=h._("__JHASH__T0C_5M__5DH__JHASH__");function a(a){var b=a.onComplete,e=a.onForgotRC;a=k("");var f=a[0],g=a[1];a=k(!1);var m=a[0],n=a[1];a=j(function(){c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"invalid_recovery_code_input"),n(!0)},[]);var o=c("useMAWEncryptedBackupsToastRestoreInProgress")(),p=o.showErrorToast,q=o.showInProgressToast;o=function(a){m&&n(!1),g(a)};a=c("useMWChatEncryptedBackupsAddDevice")({onComplete:function(){q(),b()},onFailure:function(){p()},onInvalidRecoveryCode:a});var r=a[0];a=a[1];var s=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_ENTER_RECOVERY_CODE_SCREEN_IMPRESSION");return i.jsxs(c("MWChatEncryptedBackupsDialogLayout.react"),{actionsDirection:"column",primaryAction:a?i.jsx(c("CometProgressButtonIndeterminate.react"),{label:l}):i.jsx(c("MWButton.react"),{disabled:f.length<40,label:l,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_ENTER_RECOVERY_CODE_SCREEN_ACTION_SUBMIT"),c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"recovery_code"}}),r(f)},testid:void 0}),ref:s,secondaryAction:i.jsx(c("MWButton.react"),{label:h._("__JHASH__QGcSOFnmIrT__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_ENTER_RECOVERY_CODE_SCREEN_ACTION_DONT_HAVE_RC"),e()},testid:void 0,type:"secondary"}),showTopMargin:!1,title:h._("__JHASH__8BMtxO3Z_MC__JHASH__"),children:[i.jsx("div",{className:"xwib8y2",children:i.jsx(c("MWText.react"),{type:"meta3",children:h._("__JHASH__ROuQcG-q1fX__JHASH__")})}),i.jsx(c("MWChatEncriptedBackupsAccessCodeInput.react"),{onValueChange:o,value:f}),m?i.jsx("div",{className:"x5ib6vp xc73u3c",children:i.jsx(c("MWText.react"),{align:"center",color:"negative",testid:void 0,type:"meta3",children:h._("__JHASH__5BFLDEXhZag__JHASH__")})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEncryptedBackupsInitializeRestore.bs",["LS.bs","LSInitializeRestore","LSTransaction.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("LSTransaction.bs").run(a,function(a){return b("LSInitializeRestore")(b("LS.bs").make(a))},"readWrite")}f.initializeRestoreStoredProcedure=a}),null);
__d("MWChatEncryptedBackupsSettingsDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsSettingsDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWChatEncryptedBackupsSettingsDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsSettingsDialog.react").__setRef("MWChatEncryptedBackupsSettingsDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatSidebarEncryptedBackupsMenuItem.react",["fbt","MWChatEncryptedBackupsSettingsDialog.entrypoint","MWEncryptedBackupsFetchBackupMetadata.re","MWInboxSettingsMenuIcons.bs","MWJewelPopoverDialogContext.react","MWMenuItem.react","react","useCometEntryPointDialog","useMWChatEncryptedBackupsState"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useContext,k=h._("__JHASH__Lde2nkz74OF__JHASH__");function a(){var a=c("useCometEntryPointDialog")(c("MWChatEncryptedBackupsSettingsDialog.entrypoint"),{}),b=a[0];a=j(c("MWJewelPopoverDialogContext.react"));var e=a.setIsOpenForDialog,f=c("useMWChatEncryptedBackupsState")(),g=d("MWEncryptedBackupsFetchBackupMetadata.re").useHook();a=function(){(f===4||f===3)&&g(),e(!0),b({initialBackupState:f})};var l=f===0||f===1;return i.jsx(c("MWMenuItem.react"),{auxItem:{auxText:f===3?h._("__JHASH__zuHjNmdQ8AD__JHASH__"):h._("__JHASH__YsrKpzbN1OC__JHASH__"),type:"text"},disabled:l,icon:c("MWInboxSettingsMenuIcons.bs").SecureStorage.icon,onClick:a,primaryText:k,role:"menuitemcheckbox",testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSBackupsState.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];var g=[0,4];b=b("bs_caml_int64").neg_one;f.noInfo=a;f.fetchInProgress=c;f.noBackupsPresent=d;f.deviceOnboarded=e;f.deviceNotOnboarded=g;f.fetchError=b}),null);
__d("MWEncryptedBackupsProcessBackupIds.bs",["LS.bs","LSBackupsState.bs","LSProcessBackupIds","LSTransaction.bs","MAWGating.bs","Promise","ReQL.bs","ReQLSubscription.bs","bs_caml_int64","promiseDone"],(function(a,b,c,d,e,f){"use strict";function g(a){if(b("MAWGating.bs").isLabyrinthOnWebEnabled(void 0))return b("LSTransaction.bs").run(a,function(a){return b("LSProcessBackupIds")(void 0,b("LS.bs").make(a))},"readWrite").then(function(a){return b("bs_caml_int64").to_int32(a[0])});else return b("Promise").resolve(b("bs_caml_int64").to_int32(b("LSBackupsState.bs").noInfo))}function a(a,c){var d=b("ReQL.bs").fromTableAscending(a.table("encrypted_backups"));(function(a){});d=b("ReQLSubscription.bs").subscribe(a,d,function(d){if(d!==void 0){b("promiseDone")(g(a),c,void 0);return}});return d}f.processBackupIdsStoredProcedure=g;f.subscribeToEncryptedBackupsRow=a}),null);
__d("MAWSecurityAlertsWithAdminMsgOptMenuItem.react",["JSResourceForInteraction","MWJewelPopoverDialogContext.react","MWMenuItem.react","MWPBumpEntityKey.re","react","useCometLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext,j=c("JSResourceForInteraction")("MAWSecurityAlertsDialogWithAdminMsgOpt.react").__setRef("MAWSecurityAlertsWithAdminMsgOptMenuItem.react");function a(a){var b=c("useCometLazyDialog")(j),d=b[0];b=i(c("MWJewelPopoverDialogContext.react"));var e=b.setIsOpenForDialog;return h.jsx(c("MWMenuItem.react"),babelHelpers["extends"]({},a,{onClick:function(){c("MWPBumpEntityKey.re").bumpEntityKeyWithAppId("mw.sidebar","security_alerts"),e(!0),d({})}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWLSIndexedDBDelete.re",["MWLSIndexedDBDelete.bs"],(function(a,b,c,d,e,f){a=b("MWLSIndexedDBDelete.bs").deleteIndexedDB;f.deleteIndexedDB=a}),null);
__d("E2EEBackupSecretRestoreModule",["E2EEBackupCommon","Promise","QuickPerformanceLogger","VestaClient","VestaClientError","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(235874858,"168");function a(a,e,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;return b("regeneratorRuntime").async(function(H){while(1)switch(H.prev=H.next){case 0:c("QuickPerformanceLogger").markerStart(h);c("QuickPerformanceLogger").markerAnnotate(h,{string:{product_use_case:e.productUseCase}});H.prev=2;H.next=5;return b("regeneratorRuntime").awrap(a.initLogin({clientId:e.clientId,productUseCase:e.productUseCase},f));case 5:g=H.sent;i=g.islandRsaPub;j=g.islandRsaPubSig;k=g.islandEd25519Pub;l=g.islandEd25519PubSig;m=g.isRegistered;c("QuickPerformanceLogger").markerPoint(h,"init_login_network_call");if(m){H.next=16;break}c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:"NOT_REGISTERED"}});c("QuickPerformanceLogger").markerEnd(h,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NOT_REGISTERED);case 16:H.next=18;return b("regeneratorRuntime").awrap(b("Promise").all([d("VestaClient").validateHsmKey(i,j),d("VestaClient").validateHsmKey(k,l)]));case 18:n=H.sent;o=n[0];p=n[1];if(o){H.next=25;break}c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:"ISLAND_PUB_RSA_KEY_INVALID"}});c("QuickPerformanceLogger").markerEnd(h,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_RSA_KEY_INVALID);case 25:if(p){H.next=29;break}c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:"ISLAND_PUB_ED25519_KEY_INVALID"}});c("QuickPerformanceLogger").markerEnd(h,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.ISLAND_PUB_ED25519_KEY_INVALID);case 29:c("QuickPerformanceLogger").markerPoint(h,"verify_island_rsa_key");c("QuickPerformanceLogger").markerPoint(h,"verify_island_ed25519_key");q=e.vestaAccountPin;if(!(q==null)){H.next=36;break}throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.MISSING_PIN_INPUT);case 36:r=new TextEncoder();H.next=39;return b("regeneratorRuntime").awrap(d("VestaClient").beginLogin(r.encode(q)));case 39:s=H.sent;t=s.clientState;u=s.l1Message;c("QuickPerformanceLogger").markerPoint(h,"begin_login_vesta_client");H.next=45;return b("regeneratorRuntime").awrap(a.beginLogin({clientId:e.clientId,productUseCase:e.productUseCase,opaqueL1:u},f));case 45:v=H.sent;w=v.opaqueL2;x=v.opaqueL2Sig;c("QuickPerformanceLogger").markerPoint(h,"begin_login_network_call");H.next=51;return b("regeneratorRuntime").awrap(d("VestaClient").finishLogin(w,x,k,t));case 51:y=H.sent;z=y.exportKey;A=y.l3Message;B=y.sessionKey;c("QuickPerformanceLogger").markerPoint(h,"finish_login_vesta_client");H.next=58;return b("regeneratorRuntime").awrap(a.finishLogin({clientId:e.clientId,productUseCase:e.productUseCase,opaqueL3:A},f));case 58:C=H.sent;D=C.loginSuccess;E=C.loginPayload;c("QuickPerformanceLogger").markerPoint(h,"finish_login_network_call");if(D){H.next=66;break}c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:"VESTA_SERVER_ERROR"}});c("QuickPerformanceLogger").markerEnd(h,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR);case 66:if(!(E!=null)){H.next=74;break}H.next=69;return b("regeneratorRuntime").awrap(d("VestaClient").unpackLoginPayload(E,B,z));case 69:F=H.sent;G=F.userSecret;c("QuickPerformanceLogger").markerPoint(h,"unpack_login_payload");c("QuickPerformanceLogger").markerEnd(h,2);return H.abrupt("return",G);case 74:c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:"VESTA_SERVER_ERROR"}});c("QuickPerformanceLogger").markerEnd(h,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_SERVER_ERROR);case 77:H.next=96;break;case 79:H.prev=79;H.t0=H["catch"](2);if(!(H.t0 instanceof d("E2EEBackupCommon").BackupError)){H.next=85;break}throw H.t0;case 85:if(!(H.t0 instanceof c("VestaClientError"))){H.next=93;break}c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:"VestaClientException: "+H.t0.name}});c("QuickPerformanceLogger").markerEnd(h,3);if(!(H.t0.name==="InvalidUserPassword")){H.next=90;break}throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.INVALID_PASSWORD,H.t0);case 90:throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.VESTA_CLIENT_ERROR,H.t0);case 93:c("QuickPerformanceLogger").markerAnnotate(h,{string:{failure_reason:H.t0.message}});c("QuickPerformanceLogger").markerEnd(h,3);throw new(d("E2EEBackupCommon").BackupError)(d("E2EEBackupCommon").BackupErrorType.NETWORK_PROVIDER_ERROR,H.t0);case 96:case"end":return H.stop()}},null,this,[[2,79]])}g.restoreBackupSecret=a}),98);
__d("VestaServerGraphQLLoginProvider",["E2EEBackupUtil","Promise","RelayHooks","RelayModern","VestaServerGraphQLLoginProviderBeginLoginMutation.graphql","VestaServerGraphQLLoginProviderFinishLoginMutation.graphql","VestaServerGraphQLLoginProviderInitQuery.graphql","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,c){var e,f,g,i,j,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:e=c.environment;q.next=3;return b("regeneratorRuntime").awrap(d("RelayHooks").fetchQuery(e,h!==void 0?h:h=b("VestaServerGraphQLLoginProviderInitQuery.graphql"),{request:{fbid:a.clientId,product_use_case:a.productUseCase,vesta_client_api_version:3}}).toPromise());case 3:f=q.sent;g=f==null?void 0:f.fbid_based_auth_layer_vesta_login_init;i=g==null?void 0:g.base64url_encoded_island_rsa_pub;j=g==null?void 0:g.base64url_encoded_island_rsa_pub_signature;k=g==null?void 0:g.base64url_encoded_opaque_pub;l=g==null?void 0:g.base64url_encoded_opaque_pub_signature;m=g==null?void 0:g.base64url_encoded_island_ed25519_pub;n=g==null?void 0:g.base64url_encoded_island_ed25519_pub_signature;o=g==null?void 0:g.is_registered;p=g==null?void 0:g.attempts_remaining;if(!(i!=null&&j!=null&&k!=null&&l!=null&&m!=null&&n!=null&&o!=null)){q.next=15;break}return q.abrupt("return",{islandRsaPub:d("E2EEBackupUtil").decodeBase64Url(i),islandRsaPubSig:d("E2EEBackupUtil").decodeBase64Url(j),opaquePub:d("E2EEBackupUtil").decodeBase64Url(k),opaquePubSig:d("E2EEBackupUtil").decodeBase64Url(l),islandEd25519Pub:d("E2EEBackupUtil").decodeBase64Url(m),islandEd25519PubSig:d("E2EEBackupUtil").decodeBase64Url(n),isRegistered:o,loginAttemptsRemaining:p});case 15:throw new Error("GraphQL Response is Null");case 16:case"end":return q.stop()}},null,this)}function c(a,c){var e=c.environment,f=i!==void 0?i:i=b("VestaServerGraphQLLoginProviderBeginLoginMutation.graphql"),g={input:{fbid:a.clientId,product_use_case:a.productUseCase,base64url_encoded_opaque_l1:d("E2EEBackupUtil").encodeBase64Url(a.opaqueL1)}};return new(b("Promise"))(function(a,b){d("RelayModern").commitMutation(e,{mutation:f,variables:g,onCompleted:function(c){c=c.fbid_based_auth_layer_vesta_begin_login;var e=c==null?void 0:c.base64url_encoded_opaque_l2;c=c==null?void 0:c.base64url_encoded_opaque_l2_sig;if(e!=null&&c!=null){a({opaqueL2:d("E2EEBackupUtil").decodeBase64Url(e),opaqueL2Sig:d("E2EEBackupUtil").decodeBase64Url(c)});return}b(new Error("GraphQL Response is Null"))},onError:function(a){b(a)}})})}function e(a,c){var e=c.environment,f=c.updater;return new(b("Promise"))(function(c,g){d("RelayModern").commitMutation(e,{mutation:j!==void 0?j:j=b("VestaServerGraphQLLoginProviderFinishLoginMutation.graphql"),variables:{input:{fbid:a.clientId,product_use_case:a.productUseCase,base64url_encoded_opaque_l3:d("E2EEBackupUtil").encodeBase64Url(a.opaqueL3)}},onCompleted:function(a){a=a.fbid_based_auth_layer_vesta_finish_login;var b=a==null?void 0:a.base64url_encoded_login_payload,e=a==null?void 0:a.login_success;a=a==null?void 0:a.attempts_remaining;if(e!=null){c({loginSuccess:e,loginPayload:b==null?b:d("E2EEBackupUtil").decodeBase64Url(b),attemptsRemaining:a});return}g(new Error("GraphQL Response is Null"))},onError:function(a){g(a)},updater:f})})}g.initLogin=a;g.beginLogin=c;g.finishLogin=e}),98);
__d("MLCInteractionLoggerEvent",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({CLICK:"click",FORMAT_TEXT:"format_text",FORMAT_ELEMENT:"format_element",UNDO:"undo",REDO:"redo",KEY_ARROW_RIGHT:"key_arrow_right",KEY_ARROW_LEFT:"key_arrow_left",KEY_ARROW_UP:"key_arrow_up",KEY_ARROW_DOWN:"key_arrow_down",KEY_ENTER:"key_enter",KEY_ESCAPE:"key_escape",KEY_DELETE:"key_delete",KEY_TAB:"key_tab",INDENT_CONTENT:"indent_content",OUTDENT_CONTENT:"outdent_content",DRAGSTART:"dragstart",DRAGEND:"dragend",DROP:"drop",COPY:"copy",CUT:"cut",PASTE:"paste",CLEAR_HISTORY:"clear_history",CLEAR_EDITOR:"clear_editor",COMMIT_CREATE:"commit_create",COMMIT_EDIT:"commit_edit",CREATE_NODE:"create_node",DELETE_NODE:"delete_node",TEXT_CONTENT:"text_content",TYPEAHEAD:"typeahead",EMOJI_PICKER:"emoji_picker"});c=a;f["default"]=c}),66);
__d("MlcInteractionBizappEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2652");c=b("FalcoLoggerInternal").create("mlc_interaction_bizapp_event",a);e.exports=c}),null);
__d("MlcInteractionFacebookAndWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2653");c=b("FalcoLoggerInternal").create("mlc_interaction_facebook_and_workplace_event",a);e.exports=c}),null);
__d("MlcInteractionFacebookEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2654");c=b("FalcoLoggerInternal").create("mlc_interaction_facebook_event",a);e.exports=c}),null);
__d("MlcInteractionInstagramEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("3767");c=b("FalcoLoggerInternal").create("mlc_interaction_instagram_event",a);e.exports=c}),null);
__d("MlcInteractionInternalToolsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2655");c=b("FalcoLoggerInternal").create("mlc_interaction_internal_tools_event",a);e.exports=c}),null);
__d("MlcInteractionMessagingLightswitchEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2656");c=b("FalcoLoggerInternal").create("mlc_interaction_messaging_lightswitch_event",a);e.exports=c}),null);
__d("MlcInteractionWorkplaceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("2657");c=b("FalcoLoggerInternal").create("mlc_interaction_workplace_event",a);e.exports=c}),null);
__d("MLCInteractionInstrumentationImplPlugin__INTERNAL.react",["FBLogger","Lexical","LexicalComposerContext","LexicalText","LexicalUtils","MLCInstrumentationCommands","MlcInteractionBizappEventFalcoEvent","MlcInteractionFacebookAndWorkplaceEventFalcoEvent","MlcInteractionFacebookEventFalcoEvent","MlcInteractionInstagramEventFalcoEvent","MlcInteractionInternalToolsEventFalcoEvent","MlcInteractionMessagingLightswitchEventFalcoEvent","MlcInteractionWorkplaceEventFalcoEvent","react","uuid"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useLayoutEffect,j=b.useRef,k=2e3;function l(a){switch(a){case"facebook":return c("MlcInteractionFacebookEventFalcoEvent");case"workplace":return c("MlcInteractionWorkplaceEventFalcoEvent");case"facebook_and_workplace":return c("MlcInteractionFacebookAndWorkplaceEventFalcoEvent");case"internal_tools":return c("MlcInteractionInternalToolsEventFalcoEvent");case"messaging_lightswitch":return c("MlcInteractionMessagingLightswitchEventFalcoEvent");case"bizapp":return c("MlcInteractionBizappEventFalcoEvent");case"instagram":return c("MlcInteractionInstagramEventFalcoEvent");default:a}throw c("FBLogger")("lexical").mustfixThrow("Policy product not handled by exhaustive switch-case? %s",a)}var m=function(a){this.value=a};function n(a,b){var c=b.deviceEvent,d=b.deviceEventEndTime,e=b.deviceEventStartTime,f=b.documentID,g=b.event,h=b.eventPayload,i=b.isContentEditableEvent,j=b.surface,k=b.times;l(a).log(function(){return{device_event:c,device_event_end_time:String(d),device_event_start_time:String(e),document_id:f,event:g,event_payload:h instanceof m?h.value:h,is_content_editable_event:i,surface:j,times:String(k)}})}function o(){return"TEMP:"+c("uuid")()}function p(a){return a.startsWith("TEMP:")}function q(a,b){return a.deviceEvent===b.deviceEvent&&a.documentID===b.documentID&&a.event===b.event&&(a.eventPayload instanceof m||b.eventPayload instanceof m||a.eventPayload===b.eventPayload)&&a.isContentEditableEvent===b.isContentEditableEvent&&a.surface===b.surface}function a(a){var b=a.editor__DEPRECATED,c=a.policyProduct,e=a.surface,f;if(b)f=b;else{a=d("LexicalComposerContext").useLexicalComposerContext();f=a[0]}var g=j(o()),l=j(null);i(function(){return f.registerRootListener(function(a){l.current=a})},[f]);h(function(){var a=null;function b(b,d){if(!f.isEditable())return!1;var h=window.event;if((h==null?void 0:h.type)==="message")return!1;var i=h==null?void 0:h.target,j=Date.now(),m={deviceEvent:h==null?void 0:h.type,deviceEventEndTime:j,deviceEventStartTime:j,documentID:g.current,event:b,eventPayload:d,isContentEditableEvent:i instanceof Node&&((h=l.current)==null?void 0:h.contains(i))||!1,surface:e,times:1};if(a!==null){j=a.data;b=a.timeoutID;q(j,m)?m=babelHelpers["extends"]({},m,{deviceEventStartTime:j.deviceEventStartTime,times:j.times+m.times}):n(c,j);window.clearTimeout(b)}a={data:m,timeoutID:window.setTimeout(function(){n(c,m),a=null},k)};return!1}function h(){if(a!==null){var b=a.data,d=a.timeoutID;n(c,b);window.clearTimeout(d)}}function i(a,b){return f.registerCommand(a,function(a){b(a);return!1},d("Lexical").COMMAND_PRIORITY_CRITICAL)}var j=[],r=function(){if(t){if(u>=s.length)return"break";v=s[u++]}else{u=s.next();if(u.done)return"break";v=u.value}var a=v;j.push(f.registerMutationListener(a.klass,function(c){for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];var g=a.klass.getType();f==="created"?b("create_node",g):f==="destroyed"&&b("delete_node",g)}}))};for(var s=f._nodes.values(),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v,w=r();if(w==="break")break}var x=f.getEditorState().read(d("LexicalText").$rootTextContent);w=f.registerTextContentListener(function(a){a!==x&&(b("text_content",new m(String(a.length))),x=a)});r=d("LexicalUtils").mergeRegister.apply(void 0,[i(d("Lexical").CLICK_COMMAND,function(){b("click",null)}),i(d("Lexical").FORMAT_TEXT_COMMAND,function(a){b("format_text",a)}),i(d("Lexical").FORMAT_ELEMENT_COMMAND,function(a){b("format_element",a)}),i(d("Lexical").UNDO_COMMAND,function(){b("undo",null)}),i(d("Lexical").REDO_COMMAND,function(){b("redo",null)}),i(d("Lexical").KEY_ARROW_RIGHT_COMMAND,function(){b("key_arrow_right",null)}),i(d("Lexical").KEY_ARROW_LEFT_COMMAND,function(){b("key_arrow_left",null)}),i(d("Lexical").KEY_ARROW_UP_COMMAND,function(){b("key_arrow_up",null)}),i(d("Lexical").KEY_ARROW_DOWN_COMMAND,function(){b("key_arrow_down",null)}),i(d("Lexical").KEY_ENTER_COMMAND,function(){b("key_enter",null)}),i(d("Lexical").KEY_ESCAPE_COMMAND,function(){b("key_escape",null)}),i(d("Lexical").KEY_DELETE_COMMAND,function(){b("key_delete",null)}),i(d("Lexical").KEY_TAB_COMMAND,function(){b("key_tab",null)}),i(d("Lexical").INDENT_CONTENT_COMMAND,function(){b("indent_content",null)}),i(d("Lexical").OUTDENT_CONTENT_COMMAND,function(){b("outdent_content",null)}),i(d("Lexical").DRAGSTART_COMMAND,function(){b("dragstart",null)}),i(d("Lexical").DRAGEND_COMMAND,function(){b("dragend",null)}),i(d("Lexical").DROP_COMMAND,function(){b("drop",null)}),i(d("Lexical").COPY_COMMAND,function(){b("copy",null)}),i(d("Lexical").CUT_COMMAND,function(){b("cut",null)}),i(d("Lexical").PASTE_COMMAND,function(){b("paste",null)}),i(d("Lexical").CLEAR_HISTORY_COMMAND,function(){b("clear_history",null)}),i(d("Lexical").CLEAR_EDITOR_COMMAND,function(){p(g.current)&&(g.current=o()),b("clear_editor",null)}),i(d("MLCInstrumentationCommands").COMMIT_COMMAND,function(a){a==="create"?b("commit_create",null):b("commit_edit",null)}),i(d("MLCInstrumentationCommands").DOCUMENT_COMMAND,function(a){g.current=(a=a)!=null?a:o()}),i(d("MLCInstrumentationCommands").PLUGIN_EVENT_COMMAND,function(a){var c=a.event;a=a.value;b(c,typeof a==="string"?a:JSON.stringify(a))})].concat(j,[w,h]));f.dispatchCommand(d("MLCInstrumentationCommands").INTERACTION_INSTRUMENTATION_READY,void 0);return r},[f,c,e]);return null}g["default"]=a}),98);